<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text-html; charset=utf-8" /><title>3&nbsp;SchemeUnit API</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default" /><script type="text/javascript" src="scribble-common.js"></script></head><body id="scribble-plt-scheme-org"><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink"><b>Scheme<span class="mywbr"> </span>Unit</b>:<span class="mywbr"> </span> Unit Testing for Scheme</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="quick-start.html" class="tocviewlink">Quick Start Guide for Scheme<span class="mywbr"> </span>Unit</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="philosophy.html" class="tocviewlink">The Philosophy of Scheme<span class="mywbr"> </span>Unit</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="api.html" class="tocviewselflink">Scheme<span class="mywbr"> </span>Unit API</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="Release_Notes.html" class="tocviewlink">Release Notes</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="Acknowlegements.html" class="tocviewlink">Acknowlegements</a></td></tr><tr><td align="right"></td><td><a href="doc-index.html" class="tocviewlink">Index</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>3&nbsp;</td><td><a href="api.html" class="tocviewselflink">Scheme<span class="mywbr"> </span>Unit API</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">3.1&nbsp;</td><td><a href="api.html#(part._.Overview_of_.Scheme.Unit)" class="tocviewlink">Overview of Scheme<span class="mywbr"> </span>Unit</a></td></tr><tr><td align="right">3.2&nbsp;</td><td><a href="api.html#(part._.Checks)" class="tocviewlink">Checks</a></td></tr><tr><td align="right">3.3&nbsp;</td><td><a href="api.html#(part._.Compound_.Testing_.Forms)" class="tocviewlink">Compound Testing Forms</a></td></tr><tr><td align="right">3.4&nbsp;</td><td><a href="api.html#(part._.Test_.Control_.Flow)" class="tocviewlink">Test Control Flow</a></td></tr><tr><td align="right">3.5&nbsp;</td><td><a href="api.html#(part._.Miscellaneous_.Utilities)" class="tocviewlink">Miscellaneous Utilities</a></td></tr><tr><td align="right">3.6&nbsp;</td><td><a href="api.html#(part._ui)" class="tocviewlink">User Interfaces</a></td></tr><tr><td align="right">3.7&nbsp;</td><td><a href="api.html#(part._running)" class="tocviewlink">Programmatically Running Tests and Inspecting Results</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">3.1<tt>&nbsp;</tt></span><a href="#(part._.Overview_of_.Scheme.Unit)" class="tocsubseclink">Overview of Scheme<span class="mywbr"> </span>Unit</a></td></tr><tr><td><span class="tocsublinknumber">3.2<tt>&nbsp;</tt></span><a href="#(part._.Checks)" class="tocsubseclink">Checks</a></td></tr><tr><td><a href="#(def._((lib._schemeunit/test..ss)._check))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check</span></span></span></span></a></td></tr><tr><td><a href="#(def._((lib._schemeunit/test..ss)._check-eq~3f))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-<wbr></wbr>eq?</span></span></span></span></a></td></tr><tr><td><a href="#(def._((lib._schemeunit/test..ss)._check-not-eq~3f))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-<wbr></wbr>not-<wbr></wbr>eq?</span></span></span></span></a></td></tr><tr><td><a href="#(def._((lib._schemeunit/test..ss)._check-eqv~3f))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-<wbr></wbr>eqv?</span></span></span></span></a></td></tr><tr><td><a href="#(def._((lib._schemeunit/test..ss)._check-equal~3f))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-<wbr></wbr>equal?</span></span></span></span></a></td></tr><tr><td><a href="#(def._((lib._schemeunit/test..ss)._check-not-equal~3f))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-<wbr></wbr>not-<wbr></wbr>equal?</span></span></span></span></a></td></tr><tr><td><a href="#(def._((lib._schemeunit/test..ss)._check-pred))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-<wbr></wbr>pred</span></span></span></span></a></td></tr><tr><td><a href="#(def._((lib._schemeunit/test..ss)._check-~3d))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-<wbr></wbr>=</span></span></span></span></a></td></tr><tr><td><a href="#(def._((lib._schemeunit/test..ss)._check-true))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-<wbr></wbr>true</span></span></span></span></a></td></tr><tr><td><a href="#(def._((lib._schemeunit/test..ss)._check-false))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-<wbr></wbr>false</span></span></span></span></a></td></tr><tr><td><a href="#(def._((lib._schemeunit/test..ss)._check-not-false))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-<wbr></wbr>not-<wbr></wbr>false</span></span></span></span></a></td></tr><tr><td><a href="#(def._((lib._schemeunit/test..ss)._check-exn))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-<wbr></wbr>exn</span></span></span></span></a></td></tr><tr><td><a href="#(def._((lib._schemeunit/test..ss)._check-not-exn))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-<wbr></wbr>not-<wbr></wbr>exn</span></span></span></span></a></td></tr><tr><td><a href="#(def._((lib._schemeunit/test..ss)._fail))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">fail</span></span></span></span></a></td></tr><tr><td><a href="#(def._((lib._schemeunit/test..ss)._check-regexp-match))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-<wbr></wbr>regexp-<wbr></wbr>match</span></span></span></span></a></td></tr><tr><td><span class="tocsublinknumber">3.2.1<tt>&nbsp;</tt></span><a href="#(part._.Augmenting_.Information_on_.Check_.Failure)" class="tocsubseclink">Augmenting Information on Check Failure</a></td></tr><tr><td><a href="#(def._((lib._schemeunit/test..ss)._check-info))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-<wbr></wbr>info</span></span></span></span></a></td></tr><tr><td><a href="#(def._((lib._schemeunit/test..ss)._make-check-name))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">make-<wbr></wbr>check-<wbr></wbr>name</span></span></span></span></a></td></tr><tr><td><a href="#(def._((lib._schemeunit/test..ss)._make-check-params))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">make-<wbr></wbr>check-<wbr></wbr>params</span></span></span></span></a></td></tr><tr><td><a href="#(def._((lib._schemeunit/test..ss)._make-check-location))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">make-<wbr></wbr>check-<wbr></wbr>location</span></span></span></span></a></td></tr><tr><td><a href="#(def._((lib._schemeunit/test..ss)._make-check-expression))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">make-<wbr></wbr>check-<wbr></wbr>expression</span></span></span></span></a></td></tr><tr><td><a href="#(def._((lib._schemeunit/test..ss)._make-check-message))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">make-<wbr></wbr>check-<wbr></wbr>message</span></span></span></span></a></td></tr><tr><td><a href="#(def._((lib._schemeunit/test..ss)._make-check-actual))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">make-<wbr></wbr>check-<wbr></wbr>actual</span></span></span></span></a></td></tr><tr><td><a href="#(def._((lib._schemeunit/test..ss)._make-check-expected))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">make-<wbr></wbr>check-<wbr></wbr>expected</span></span></span></span></a></td></tr><tr><td><a href="#(def._((lib._schemeunit/test..ss)._with-check-info*))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">with-<wbr></wbr>check-<wbr></wbr>info*</span></span></span></span></a></td></tr><tr><td><a href="#(form._((lib._schemeunit/test..ss)._with-check-info))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">with-<wbr></wbr>check-<wbr></wbr>info</span></span></span></span></a></td></tr><tr><td><span class="tocsublinknumber">3.2.2<tt>&nbsp;</tt></span><a href="#(part._.Custom_.Checks)" class="tocsubseclink">Custom Checks</a></td></tr><tr><td><a href="#(form._((lib._schemeunit/test..ss)._define-simple-check))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">define-<wbr></wbr>simple-<wbr></wbr>check</span></span></span></span></a></td></tr><tr><td><a href="#(form._((lib._schemeunit/test..ss)._define-binary-check))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">define-<wbr></wbr>binary-<wbr></wbr>check</span></span></span></span></a></td></tr><tr><td><a href="#(form._((lib._schemeunit/test..ss)._define-check))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">define-<wbr></wbr>check</span></span></span></span></a></td></tr><tr><td><a href="#(form._((lib._schemeunit/test..ss)._fail-check))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">fail-<wbr></wbr>check</span></span></span></span></a></td></tr><tr><td><span class="tocsublinknumber">3.2.3<tt>&nbsp;</tt></span><a href="#(part._.The_.Check_.Evaluation_.Context)" class="tocsubseclink">The Check Evaluation Context</a></td></tr><tr><td><a href="#(def._((lib._schemeunit/test..ss)._current-check-handler))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol">current-<wbr></wbr>check-<wbr></wbr>handler</span></span></a></td></tr><tr><td><a href="#(def._((lib._schemeunit/test..ss)._current-check-around))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol">current-<wbr></wbr>check-<wbr></wbr>around</span></span></a></td></tr><tr><td><span class="tocsublinknumber">3.3<tt>&nbsp;</tt></span><a href="#(part._.Compound_.Testing_.Forms)" class="tocsubseclink">Compound Testing Forms</a></td></tr><tr><td><span class="tocsublinknumber">3.3.1<tt>&nbsp;</tt></span><a href="#(part._.Test_.Cases)" class="tocsubseclink">Test Cases</a></td></tr><tr><td><a href="#(form._((lib._schemeunit/test..ss)._test-begin))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-<wbr></wbr>begin</span></span></span></span></a></td></tr><tr><td><a href="#(form._((lib._schemeunit/test..ss)._test-case))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-<wbr></wbr>case</span></span></span></span></a></td></tr><tr><td><a href="#(def._((lib._schemeunit/test..ss)._test-case~3f))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-<wbr></wbr>case?</span></span></span></span></a></td></tr><tr><td><span class="tocsublinknumber">3.3.2<tt>&nbsp;</tt></span><a href="#(part._.Test_.Suites)" class="tocsubseclink">Test Suites</a></td></tr><tr><td><a href="#(form._((lib._schemeunit/test..ss)._test-suite))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-<wbr></wbr>suite</span></span></span></span></a></td></tr><tr><td><a href="#(def._((lib._schemeunit/test..ss)._test-suite~3f))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-<wbr></wbr>suite?</span></span></span></span></a></td></tr><tr><td><span class="tocsublinknumber">3.3.2.1<tt>&nbsp;</tt></span><a href="#(part._.Utilities_for_.Defining_.Test_.Suites)" class="tocsubseclink">Utilities for Defining Test Suites</a></td></tr><tr><td><a href="#(form._((lib._schemeunit/test..ss)._define-test-suite))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">define-<wbr></wbr>test-<wbr></wbr>suite</span></span></span></span></a></td></tr><tr><td><a href="#(form._((lib._schemeunit/test..ss)._define/provide-test-suite))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">define/<span class="mywbr"> </span>provide-<wbr></wbr>test-<wbr></wbr>suite</span></span></span></span></a></td></tr><tr><td><a href="#(form._((lib._schemeunit/test..ss)._test-suite*))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-<wbr></wbr>suite*</span></span></span></span></a></td></tr><tr><td><span class="tocsublinknumber">3.3.3<tt>&nbsp;</tt></span><a href="#(part._.Compound_.Testing_.Evaluation_.Context)" class="tocsubseclink">Compound Testing Evaluation Context</a></td></tr><tr><td><a href="#(def._((lib._schemeunit/test..ss)._current-test-name))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol">current-<wbr></wbr>test-<wbr></wbr>name</span></span></a></td></tr><tr><td><a href="#(def._((lib._schemeunit/test..ss)._current-test-case-around))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol">current-<wbr></wbr>test-<wbr></wbr>case-<wbr></wbr>around</span></span></a></td></tr><tr><td><a href="#(def._((lib._schemeunit/test..ss)._test-suite-test-case-around))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol">test-<wbr></wbr>suite-<wbr></wbr>test-<wbr></wbr>case-<wbr></wbr>around</span></span></a></td></tr><tr><td><a href="#(def._((lib._schemeunit/test..ss)._test-suite-check-around))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol">test-<wbr></wbr>suite-<wbr></wbr>check-<wbr></wbr>around</span></span></a></td></tr><tr><td><span class="tocsublinknumber">3.4<tt>&nbsp;</tt></span><a href="#(part._.Test_.Control_.Flow)" class="tocsubseclink">Test Control Flow</a></td></tr><tr><td><a href="#(form._((lib._schemeunit/test..ss)._before))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">before</span></span></span></span></a></td></tr><tr><td><a href="#(form._((lib._schemeunit/test..ss)._after))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">after</span></span></span></span></a></td></tr><tr><td><a href="#(form._((lib._schemeunit/test..ss)._around))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">around</span></span></span></span></a></td></tr><tr><td><a href="#(form._((lib._schemeunit/test..ss)._delay-test))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">delay-<wbr></wbr>test</span></span></span></span></a></td></tr><tr><td><span class="tocsublinknumber">3.5<tt>&nbsp;</tt></span><a href="#(part._.Miscellaneous_.Utilities)" class="tocsubseclink">Miscellaneous Utilities</a></td></tr><tr><td><a href="#(form._((lib._schemeunit/test..ss)._require/expose))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">require/<span class="mywbr"> </span>expose</span></span></span></span></a></td></tr><tr><td><span class="tocsublinknumber">3.6<tt>&nbsp;</tt></span><a href="#(part._ui)" class="tocsubseclink">User Interfaces</a></td></tr><tr><td><span class="tocsublinknumber">3.6.1<tt>&nbsp;</tt></span><a href="#(part._.Textual_.User_.Interface)" class="tocsubseclink">Textual User Interface</a></td></tr><tr><td><a href="#(def._((lib._schemeunit/text-ui..ss)._run-tests))" class="tocsubnonseclink"><span title="Provided from: schemeunit/text-ui"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">run-<wbr></wbr>tests</span></span></span></span></a></td></tr><tr><td><span class="tocsublinknumber">3.6.2<tt>&nbsp;</tt></span><a href="#(part._.Graphical_.User_.Interface)" class="tocsubseclink">Graphical User Interface</a></td></tr><tr><td><span class="tocsublinknumber">3.7<tt>&nbsp;</tt></span><a href="#(part._running)" class="tocsubseclink">Programmatically Running Tests and Inspecting Results</a></td></tr><tr><td><span class="tocsublinknumber">3.7.1<tt>&nbsp;</tt></span><a href="#(part._.Result_.Types)" class="tocsubseclink">Result Types</a></td></tr><tr><td><a href="#(def._((lib._schemeunit/test..ss)._exn~3atest))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol">exn:<span class="mywbr"> </span>test</span></span></a></td></tr><tr><td><a href="#(def._((lib._schemeunit/test..ss)._exn~3atest~3acheck))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">exn:<span class="mywbr"> </span>test:<span class="mywbr"> </span>check</span></span></span></span></a></td></tr><tr><td><a href="#(def._((lib._schemeunit/test..ss)._test-result))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-<wbr></wbr>result</span></span></span></span></a></td></tr><tr><td><a href="#(def._((lib._schemeunit/test..ss)._test-failure))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-<wbr></wbr>failure</span></span></span></span></a></td></tr><tr><td><a href="#(def._((lib._schemeunit/test..ss)._test-error))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-<wbr></wbr>error</span></span></span></span></a></td></tr><tr><td><a href="#(def._((lib._schemeunit/test..ss)._test-success))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-<wbr></wbr>success</span></span></span></span></a></td></tr><tr><td><span class="tocsublinknumber">3.7.2<tt>&nbsp;</tt></span><a href="#(part._.Functions_to_.Run_.Tests)" class="tocsubseclink">Functions to Run Tests</a></td></tr><tr><td><a href="#(def._((lib._schemeunit/test..ss)._run-test-case))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">run-<wbr></wbr>test-<wbr></wbr>case</span></span></span></span></a></td></tr><tr><td><a href="#(def._((lib._schemeunit/test..ss)._run-test))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">run-<wbr></wbr>test</span></span></span></span></a></td></tr><tr><td><a href="#(def._((lib._schemeunit/test..ss)._fold-test-results))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">fold-<wbr></wbr>test-<wbr></wbr>results</span></span></span></span></a></td></tr><tr><td><a href="#(def._((lib._schemeunit/test..ss)._foldts))" class="tocsubnonseclink"><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">foldts</span></span></span></span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">Version: 4.1.5.3</span></div><div class="navsettop"><span class="navleft">&nbsp;&nbsp;</span><span class="navright"><a href="philosophy.html" title="backward to &quot;2 The Philosophy of SchemeUnit&quot;">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;SchemeUnit: Unit Testing for Scheme&quot;">up</a>&nbsp;&nbsp;<a href="Release_Notes.html" title="forward to &quot;4 Release Notes&quot;">next &rarr;</a></span>&nbsp;</div><h3>3<tt>&nbsp;</tt><a name="(part._api)"></a><a name="(mod-path._schemeunit)"></a>SchemeUnit API</h3><p><table cellspacing="0" class="defmodule"><tr><td><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICh1IC4gc2NoZW1lL2Jh%0D%0Ac2Uuc3MpKSBjIHJlcXVpcmUpKSk%3D%0D%0A" class="schemesyntaxlink">require</a></span><span class="stt"> </span><a href="api.html" class="schememodlink"><span class="schemesymbol">schemeunit</span></a><span class="schemeparen">)</span></td></tr></table></p><h4>3.1<tt>&nbsp;</tt><a name="(part._.Overview_of_.Scheme.Unit)"></a>Overview of SchemeUnit</h4><p>There are three basic data types in SchemeUnit:</p><ul><li><p>A <i>check</i> is the basic unit of a test.  As the name suggests, it checks some condition is true.</p></li><li><p>A <i>test case</i> is a group of checks that form one conceptual unit.  If any check within the case fails, the entire case fails.</p></li><li><p>A <i>test suite</i> is a group of test cases and test suites that has a name.</p></li></ul><h4>3.2<tt>&nbsp;</tt><a name="(part._.Checks)"></a>Checks</h4><p>Checks are the basic building block of SchemeUnit.  A check
checks some condition.  If the condition holds the check
evaluates to <span class="schemevalue">#t</span>.  If the condition doesn&rsquo;t hold the
check raises an instance of <span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">exn:test:check</span></span></span> with
information detailing the failure.</p><p>Although checks are implemented as macros, which is
necessary to grab source location, they are conceptually
functions.  This means, for instance, checks always evaluate
their arguments.  You can use check as first class
functions, though you will lose precision in the reported
source locations if you do so.</p><p>The following are the basic checks SchemeUnit provides.  You
can create your own checks using <span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">define-check</span></span></span>.</p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._check))"></a><a name="(def._((lib._schemeunit/test..ss)._check))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check</span></span></span></span><span class="hspace">&nbsp;</span><span class="schemevariable">op</span><span class="hspace">&nbsp;</span><span class="schemevariable">v1</span><span class="hspace">&nbsp;</span><span class="schemevariable">v2</span><span class="hspace">&nbsp;</span>[<span class="schemevariable">message</span>]<span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemevalue">#t</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">op</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">-&gt;</span><span class="hspace">&nbsp;</span><span class="schemesymbol">any</span><span class="hspace">&nbsp;</span><span class="schemesymbol">any</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">or/c</span><span class="hspace">&nbsp;</span><span class="schemevalue">#t</span><span class="hspace">&nbsp;</span><span class="schemevalue">#f</span><span class="schemeparen">)</span><span class="schemeparen">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">v1</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">any</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">v2</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">any</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">message</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBz%0D%0AdHJpbmc%2FKSkp%0D%0A" class="schemevaluelink">string?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="schemevalue">""</span></td></tr></table></p><p>The simplest check.  Succeeds if <span class="schemevariable">op</span> applied to
<span class="schemevariable">v1</span> and <span class="schemevariable">v2</span> is not <span class="schemevalue">#f</span>, otherwise
raises an exception of type <span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">exn:test:check</span></span></span>.  The
optional <span class="schemevariable">message</span> is included in the output if the
check fails.</p><p>For example, the following check succeeds:</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check</span></span></span><span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyA8%0D%0AKSkp%0D%0A" class="schemevaluelink">&lt;</a></span><span class="hspace">&nbsp;</span><span class="schemevalue">2</span><span class="hspace">&nbsp;</span><span class="schemevalue">3</span><span class="schemeparen">)</span></p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._check-eq~3f))"></a><a name="(def._((lib._schemeunit/test..ss)._check-eq~3f))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-eq?</span></span></span></span><span class="hspace">&nbsp;</span><span class="schemevariable">v1</span><span class="hspace">&nbsp;</span><span class="schemevariable">v2</span><span class="hspace">&nbsp;</span>[<span class="schemevariable">message</span>]<span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemevalue">#t</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">v1</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">any</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">v2</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">any</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">message</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBz%0D%0AdHJpbmc%2FKSkp%0D%0A" class="schemevaluelink">string?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="schemevalue">""</span></td></tr><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._check-not-eq~3f))"></a><a name="(def._((lib._schemeunit/test..ss)._check-not-eq~3f))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-not-eq?</span></span></span></span><span class="hspace">&nbsp;</span><span class="schemevariable">v1</span><span class="hspace">&nbsp;</span><span class="schemevariable">v2</span><span class="hspace">&nbsp;</span>[<span class="schemevariable">message</span>]<span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemevalue">#t</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">v1</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">any</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">v2</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">any</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">message</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBz%0D%0AdHJpbmc%2FKSkp%0D%0A" class="schemevaluelink">string?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="schemevalue">""</span></td></tr><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._check-eqv~3f))"></a><a name="(def._((lib._schemeunit/test..ss)._check-eqv~3f))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-eqv?</span></span></span></span><span class="hspace">&nbsp;</span><span class="schemevariable">v1</span><span class="hspace">&nbsp;</span><span class="schemevariable">v2</span><span class="hspace">&nbsp;</span>[<span class="schemevariable">message</span>]<span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemevalue">#t</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">v1</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">any</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">v2</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">any</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">message</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBz%0D%0AdHJpbmc%2FKSkp%0D%0A" class="schemevaluelink">string?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="schemevalue">""</span></td></tr><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._check-equal~3f))"></a><a name="(def._((lib._schemeunit/test..ss)._check-equal~3f))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-equal?</span></span></span></span><span class="hspace">&nbsp;</span><span class="schemevariable">v1</span><span class="hspace">&nbsp;</span><span class="schemevariable">v2</span><span class="hspace">&nbsp;</span>[<span class="schemevariable">message</span>]<span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemevalue">#t</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">v1</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">any</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">v2</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">any</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">message</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBz%0D%0AdHJpbmc%2FKSkp%0D%0A" class="schemevaluelink">string?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="schemevalue">""</span></td></tr><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._check-not-equal~3f))"></a><a name="(def._((lib._schemeunit/test..ss)._check-not-equal~3f))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-not-equal?</span></span></span></span><span class="hspace">&nbsp;</span><span class="schemevariable">v1</span><span class="hspace">&nbsp;</span><span class="schemevariable">v2</span><span class="hspace">&nbsp;</span>[<span class="schemevariable">message</span>]<span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemevalue">#t</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">v1</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">any</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">v2</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">any</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">message</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBz%0D%0AdHJpbmc%2FKSkp%0D%0A" class="schemevaluelink">string?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="schemevalue">""</span></td></tr></table></p><p>Checks that <span class="schemevariable">v1</span> is (not) <span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBl%0D%0AcT8pKSk%3D%0D%0A" class="schemevaluelink">eq?</a></span>,
<span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBl%0D%0AcXY%2FKSkp%0D%0A" class="schemevaluelink">eqv?</a></span>, or <span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBl%0D%0AcXVhbD8pKSk%3D%0D%0A" class="schemevaluelink">equal?</a></span> to <span class="schemevariable">v2</span>. The
optional <span class="schemevariable">message</span> is included in the output if the
check fails.</p><p>For example, the following checks all fail:</p><p><table cellspacing="0" class="schemeblock"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-eq?</span></span></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBs%0D%0AaXN0KSkp%0D%0A" class="schemevaluelink">list</a></span><span class="hspace">&nbsp;</span><span class="schemevalue">1</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBs%0D%0AaXN0KSkp%0D%0A" class="schemevaluelink">list</a></span><span class="hspace">&nbsp;</span><span class="schemevalue">1</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemevalue">"allocated data not eq?"</span><span class="schemeparen">)</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-not-eq?</span></span></span><span class="hspace">&nbsp;</span><span class="schemevalue">1</span><span class="hspace">&nbsp;</span><span class="schemevalue">1</span><span class="hspace">&nbsp;</span><span class="schemevalue">"integers are eq?"</span><span class="schemeparen">)</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-eqv?</span></span></span><span class="hspace">&nbsp;</span><span class="schemevalue">1</span><span class="hspace">&nbsp;</span><span class="schemevalue">1.0</span><span class="hspace">&nbsp;</span><span class="schemevalue">"not eqv?"</span><span class="schemeparen">)</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-equal?</span></span></span><span class="hspace">&nbsp;</span><span class="schemevalue">1</span><span class="hspace">&nbsp;</span><span class="schemevalue">1.0</span><span class="hspace">&nbsp;</span><span class="schemevalue">"not equal?"</span><span class="schemeparen">)</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-not-equal?</span></span></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBs%0D%0AaXN0KSkp%0D%0A" class="schemevaluelink">list</a></span><span class="hspace">&nbsp;</span><span class="schemevalue">1</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBs%0D%0AaXN0KSkp%0D%0A" class="schemevaluelink">list</a></span><span class="hspace">&nbsp;</span><span class="schemevalue">1</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemevalue">"equal?"</span><span class="schemeparen">)</span></td></tr></table></p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._check-pred))"></a><a name="(def._((lib._schemeunit/test..ss)._check-pred))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-pred</span></span></span></span><span class="hspace">&nbsp;</span><span class="schemevariable">pred</span><span class="hspace">&nbsp;</span><span class="schemevariable">v</span><span class="hspace">&nbsp;</span>[<span class="schemevariable">message</span>]<span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemevalue">#t</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">pred</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">-&gt;</span><span class="hspace">&nbsp;</span><span class="schemesymbol">any</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">or/c</span><span class="hspace">&nbsp;</span><span class="schemevalue">#t</span><span class="hspace">&nbsp;</span><span class="schemevalue">#f</span><span class="schemeparen">)</span><span class="schemeparen">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">any</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">message</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBz%0D%0AdHJpbmc%2FKSkp%0D%0A" class="schemevaluelink">string?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="schemevalue">""</span></td></tr></table></p><p>Checks that <span class="schemevariable">pred</span> returns <span class="schemevalue">#t</span> when applied to <span class="schemevariable">v</span>.  The optional <span class="schemevariable">message</span> is included in the output if the check fails.</p><p>Here&rsquo;s an example that passes and an example that fails:</p><p><table cellspacing="0" class="schemeblock"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-pred</span></span></span><span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBz%0D%0AdHJpbmc%2FKSkp%0D%0A" class="schemevaluelink">string?</a></span><span class="hspace">&nbsp;</span><span class="schemevalue">"I work"</span><span class="schemeparen">)</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-pred</span></span></span><span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBu%0D%0AdW1iZXI%2FKSkp%0D%0A" class="schemevaluelink">number?</a></span><span class="hspace">&nbsp;</span><span class="schemevalue">"I fail"</span><span class="schemeparen">)</span></td></tr></table></p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._check-~3d))"></a><a name="(def._((lib._schemeunit/test..ss)._check-~3d))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-=</span></span></span></span><span class="hspace">&nbsp;</span><span class="schemevariable">v1</span><span class="hspace">&nbsp;</span><span class="schemevariable">v2</span><span class="hspace">&nbsp;</span><span class="schemevariable">epsilon</span><span class="hspace">&nbsp;</span>[<span class="schemevariable">message</span>]<span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemevalue">#t</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">v1</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">any</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">v2</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">any</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">epsilon</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBu%0D%0AdW1iZXI%2FKSkp%0D%0A" class="schemevaluelink">number?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">message</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBz%0D%0AdHJpbmc%2FKSkp%0D%0A" class="schemevaluelink">string?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="schemevalue">""</span></td></tr></table></p><p>Checks that <span class="schemevariable">v1</span> and <span class="schemevariable">v2</span> are within
<span class="schemevariable">epsilon</span> of one another.  The optional
<span class="schemevariable">message</span> is included in the output if the check
fails.</p><p>Here&rsquo;s an example that passes and an example that fails:</p><p><table cellspacing="0" class="schemeblock"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-=</span></span></span><span class="hspace">&nbsp;</span><span class="schemevalue">1.0</span><span class="hspace">&nbsp;</span><span class="schemevalue">1.01</span><span class="hspace">&nbsp;</span><span class="schemevalue">0.01</span><span class="hspace">&nbsp;</span><span class="schemevalue">"I work"</span><span class="schemeparen">)</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-=</span></span></span><span class="hspace">&nbsp;</span><span class="schemevalue">1.0</span><span class="hspace">&nbsp;</span><span class="schemevalue">1.01</span><span class="hspace">&nbsp;</span><span class="schemevalue">0.005</span><span class="hspace">&nbsp;</span><span class="schemevalue">"I fail"</span><span class="schemeparen">)</span></td></tr></table></p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._check-true))"></a><a name="(def._((lib._schemeunit/test..ss)._check-true))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-true</span></span></span></span><span class="hspace">&nbsp;</span><span class="schemevariable">v</span><span class="hspace">&nbsp;</span>[<span class="schemevariable">message</span>]<span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemevalue">#t</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">any</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">message</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBz%0D%0AdHJpbmc%2FKSkp%0D%0A" class="schemevaluelink">string?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="schemevalue">""</span></td></tr><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._check-false))"></a><a name="(def._((lib._schemeunit/test..ss)._check-false))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-false</span></span></span></span><span class="hspace">&nbsp;</span><span class="schemevariable">v</span><span class="hspace">&nbsp;</span>[<span class="schemevariable">message</span>]<span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemevalue">#t</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">any</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">message</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBz%0D%0AdHJpbmc%2FKSkp%0D%0A" class="schemevaluelink">string?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="schemevalue">""</span></td></tr><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._check-not-false))"></a><a name="(def._((lib._schemeunit/test..ss)._check-not-false))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-not-false</span></span></span></span><span class="hspace">&nbsp;</span><span class="schemevariable">v</span><span class="hspace">&nbsp;</span>[<span class="schemevariable">message</span>]<span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemevalue">#t</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">any</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">message</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBz%0D%0AdHJpbmc%2FKSkp%0D%0A" class="schemevaluelink">string?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="schemevalue">""</span></td></tr></table></p><p>Checks that <span class="schemevariable">v</span> is <span class="schemevalue">#t</span>, <span class="schemevalue">#f</span>, or not
<span class="schemevalue">#f</span> as appropriate.  The optional <span class="schemevariable">message</span>
is included in the output if the check fails.</p><p>For example, the following checks all fail:</p><p><table cellspacing="0" class="schemeblock"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-true</span></span></span><span class="hspace">&nbsp;</span><span class="schemevalue">1</span><span class="schemeparen">)</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-false</span></span></span><span class="hspace">&nbsp;</span><span class="schemevalue">1</span><span class="schemeparen">)</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-not-false</span></span></span><span class="hspace">&nbsp;</span><span class="schemevalue">#f</span><span class="schemeparen">)</span></td></tr></table></p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._check-exn))"></a><a name="(def._((lib._schemeunit/test..ss)._check-exn))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-exn</span></span></span></span><span class="hspace">&nbsp;</span><span class="schemevariable">exn-predicate</span><span class="hspace">&nbsp;</span><span class="schemevariable">thunk</span><span class="hspace">&nbsp;</span>[<span class="schemevariable">message</span>]<span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemevalue">#t</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">exn-predicate</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">-&gt;</span><span class="hspace">&nbsp;</span><span class="schemesymbol">any</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">or/c</span><span class="hspace">&nbsp;</span><span class="schemevalue">#t</span><span class="hspace">&nbsp;</span><span class="schemevalue">#f</span><span class="schemeparen">)</span><span class="schemeparen">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">thunk</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">-&gt;</span><span class="hspace">&nbsp;</span><span class="schemesymbol">any</span><span class="schemeparen">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">message</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBz%0D%0AdHJpbmc%2FKSkp%0D%0A" class="schemevaluelink">string?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="schemevalue">""</span></td></tr></table></p><p>Checks that <span class="schemevariable">thunk</span> raises an exception for which
<span class="schemevariable">exn-predicate</span> returns <span class="schemevalue">#t</span>.  The optional
<span class="schemevariable">message</span> is included in the output if the check
fails.  A common error is to use an expression instead of a
function of no arguments for <span class="schemevariable">thunk</span>.  Remember that
checks are conceptually functions.</p><p>Here are two example, one showing a test that succeeds, and one showing a common error:</p><p><table cellspacing="0" class="schemeblock"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-exn</span></span></span><span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBl%0D%0AeG4%2FKSkp%0D%0A" class="schemevaluelink">exn?</a></span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICh1IC4gc2NoZW1lL2Jh%0D%0Ac2Uuc3MpKSBjIGxhbWJkYSkpKQ%3D%3D%0D%0A" class="schemesyntaxlink">lambda</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemeparen">)</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBy%0D%0AYWlzZSkpKQ%3D%3D%0D%0A" class="schemevaluelink">raise</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBt%0D%0AYWtlLWV4bikpKQ%3D%3D%0D%0A" class="schemevaluelink">make-exn</a></span><span class="hspace">&nbsp;</span><span class="schemevalue">"Hi there"</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBj%0D%0AdXJyZW50LWNvbnRpbnVhdGlvbi1tYXJrcykpKQ%3D%3D%0D%0A" class="schemevaluelink">current-continuation-marks</a></span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">)</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="schemecomment">; </span><span class="schemecomment">Forgot to wrap the expression in a thunk.  Don't do this!</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-exn</span></span></span><span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBl%0D%0AeG4%2FKSkp%0D%0A" class="schemevaluelink">exn?</a></span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBy%0D%0AYWlzZSkpKQ%3D%3D%0D%0A" class="schemevaluelink">raise</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBt%0D%0AYWtlLWV4bikpKQ%3D%3D%0D%0A" class="schemevaluelink">make-exn</a></span><span class="hspace">&nbsp;</span><span class="schemevalue">"Hi there"</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBj%0D%0AdXJyZW50LWNvbnRpbnVhdGlvbi1tYXJrcykpKQ%3D%3D%0D%0A" class="schemevaluelink">current-continuation-marks</a></span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">)</span></td></tr></table></p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._check-not-exn))"></a><a name="(def._((lib._schemeunit/test..ss)._check-not-exn))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-not-exn</span></span></span></span><span class="hspace">&nbsp;</span><span class="schemevariable">thunk</span><span class="hspace">&nbsp;</span>[<span class="schemevariable">message</span>]<span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemevalue">#t</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">thunk</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">-&gt;</span><span class="hspace">&nbsp;</span><span class="schemesymbol">any</span><span class="schemeparen">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">message</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBz%0D%0AdHJpbmc%2FKSkp%0D%0A" class="schemevaluelink">string?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="schemevalue">""</span></td></tr></table></p><p>Checks that <span class="schemevariable">thunk</span> does not raise any exceptions.
The optional <span class="schemevariable">message</span> is included in the output if
the check fails.</p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._fail))"></a><a name="(def._((lib._schemeunit/test..ss)._fail))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">fail</span></span></span></span><span class="hspace">&nbsp;</span>[<span class="schemevariable">message</span>]<span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemevalue">#t</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">message</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBz%0D%0AdHJpbmc%2FKSkp%0D%0A" class="schemevaluelink">string?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="schemevalue">""</span></td></tr></table></p><p>This checks fails unconditionally.  Good for creating test stubs that youintend to fill out later.  The optional <span class="schemevariable">message</span> is included in the output if the check fails.</p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._check-regexp-match))"></a><a name="(def._((lib._schemeunit/test..ss)._check-regexp-match))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-regexp-match</span></span></span></span><span class="hspace">&nbsp;</span><span class="schemevariable">regexp</span><span class="hspace">&nbsp;</span><span class="schemevariable">string</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemevalue">#t</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">regexp</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBy%0D%0AZWdleHA%2FKSkp%0D%0A" class="schemevaluelink">regexp?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">string</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBz%0D%0AdHJpbmc%2FKSkp%0D%0A" class="schemevaluelink">string?</a></span></td></tr></table></p><p>Checks that <span class="schemevariable">regexp</span> matches the <span class="schemevariable">string</span>.</p><p>The following check will succeed:</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-regexp-match</span></span></span><span class="hspace">&nbsp;</span><span class="schemevalue">"a+bba"</span><span class="hspace">&nbsp;</span><span class="schemevalue">"aaaaaabba"</span><span class="schemeparen">)</span></p><p>This check will fail:</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-regexp-match</span></span></span><span class="hspace">&nbsp;</span><span class="schemevalue">"a+bba"</span><span class="hspace">&nbsp;</span><span class="schemevalue">"aaaabbba"</span><span class="schemeparen">)</span></p><h5>3.2.1<tt>&nbsp;</tt><a name="(part._.Augmenting_.Information_on_.Check_.Failure)"></a>Augmenting Information on Check Failure</h5><p>When an check fails it stores information including the name
of the check, the location and message (if available), the
expression the check is called with, and the parameters to
the check.  Additional information can be stored by using
the <span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">with-check-info*</span></span></span> function, and the
<span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">with-check-info</span></span></span> macro.</p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><span class="schemeparen">struct</span><span class="stt"> </span><a name="(dep._((lib._schemeunit/test..ss)._check-info-value))"></a><a name="(def._((lib._schemeunit/test..ss)._check-info-value))"></a><a name="(dep._((lib._schemeunit/test..ss)._check-info-name))"></a><a name="(def._((lib._schemeunit/test..ss)._check-info-name))"></a><a name="(dep._((lib._schemeunit/test..ss)._make-check-info))"></a><a name="(def._((lib._schemeunit/test..ss)._make-check-info))"></a><a name="(dep._((lib._schemeunit/test..ss)._check-info~3f))"></a><a name="(def._((lib._schemeunit/test..ss)._check-info~3f))"></a><a name="(dep._((lib._schemeunit/test..ss)._struct~3acheck-info))"></a><a name="(def._((lib._schemeunit/test..ss)._struct~3acheck-info))"></a><a name="(dep._((lib._schemeunit/test..ss)._check-info))"></a><a name="(def._((lib._schemeunit/test..ss)._check-info))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-info</span></span></span></span><span class="stt"> </span><span class="schemeparen">(</span><span class="schemesymbol">name</span><span class="stt"> </span><span class="schemesymbol">value</span><span class="schemeparen">)</span><span class="schemeparen">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemesymbol">name</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBz%0D%0AeW1ib2w%2FKSkp%0D%0A" class="schemevaluelink">symbol?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemesymbol">value</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">any</span></td></tr></table></p><p>A check-info structure stores information associated
with the context of execution of an check.</p><p>The are several predefined functions that create check
information structures with predefined names.  This avoids
misspelling errors:</p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._make-check-name))"></a><a name="(def._((lib._schemeunit/test..ss)._make-check-name))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">make-check-name</span></span></span></span><span class="hspace">&nbsp;</span><span class="schemevariable">name</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-info?</span></span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">name</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBz%0D%0AdHJpbmc%2FKSkp%0D%0A" class="schemevaluelink">string?</a></span></td></tr><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._make-check-params))"></a><a name="(def._((lib._schemeunit/test..ss)._make-check-params))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">make-check-params</span></span></span></span><span class="hspace">&nbsp;</span><span class="schemevariable">params</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-info?</span></span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">params</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">listof</span><span class="hspace">&nbsp;</span><span class="schemesymbol">any</span><span class="schemeparen">)</span></td></tr><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._make-check-location))"></a><a name="(def._((lib._schemeunit/test..ss)._make-check-location))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">make-check-location</span></span></span></span><span class="hspace">&nbsp;</span><span class="schemevariable">loc</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-info?</span></span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">loc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBs%0D%0AaXN0KSkp%0D%0A" class="schemevaluelink">list</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">any</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">or/c</span><span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBu%0D%0AdW1iZXI%2FKSkp%0D%0A" class="schemevaluelink">number?</a></span><span class="hspace">&nbsp;</span><span class="schemevalue">#f</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">or/c</span><span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBu%0D%0AdW1iZXI%2FKSkp%0D%0A" class="schemevaluelink">number?</a></span><span class="hspace">&nbsp;</span><span class="schemevalue">#f</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">or/c</span><span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBu%0D%0AdW1iZXI%2FKSkp%0D%0A" class="schemevaluelink">number?</a></span><span class="hspace">&nbsp;</span><span class="schemevalue">#f</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">or/c</span><span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBu%0D%0AdW1iZXI%2FKSkp%0D%0A" class="schemevaluelink">number?</a></span><span class="hspace">&nbsp;</span><span class="schemevalue">#f</span><span class="schemeparen">)</span><span class="schemeparen">)</span></td></tr><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._make-check-expression))"></a><a name="(def._((lib._schemeunit/test..ss)._make-check-expression))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">make-check-expression</span></span></span></span><span class="hspace">&nbsp;</span><span class="schemevariable">msg</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-info?</span></span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">msg</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">any</span></td></tr><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._make-check-message))"></a><a name="(def._((lib._schemeunit/test..ss)._make-check-message))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">make-check-message</span></span></span></span><span class="hspace">&nbsp;</span><span class="schemevariable">msg</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-info?</span></span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">msg</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBz%0D%0AdHJpbmc%2FKSkp%0D%0A" class="schemevaluelink">string?</a></span></td></tr><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._make-check-actual))"></a><a name="(def._((lib._schemeunit/test..ss)._make-check-actual))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">make-check-actual</span></span></span></span><span class="hspace">&nbsp;</span><span class="schemevariable">param</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-info?</span></span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">param</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">any</span></td></tr><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._make-check-expected))"></a><a name="(def._((lib._schemeunit/test..ss)._make-check-expected))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">make-check-expected</span></span></span></span><span class="hspace">&nbsp;</span><span class="schemevariable">param</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-info?</span></span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">param</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">any</span></td></tr></table></p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._with-check-info*))"></a><a name="(def._((lib._schemeunit/test..ss)._with-check-info*))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">with-check-info*</span></span></span></span><span class="hspace">&nbsp;</span><span class="schemevariable">info</span><span class="hspace">&nbsp;</span><span class="schemevariable">thunk</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemesymbol">any</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">info</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">listof</span><span class="hspace">&nbsp;</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-info?</span></span></span><span class="schemeparen">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">thunk</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">-&gt;</span><span class="hspace">&nbsp;</span><span class="schemesymbol">any</span><span class="schemeparen">)</span></td></tr></table></p><p>Stores the given <span class="schemevariable">info</span> on the check-info stack for
the duration (the dynamic extent) of the execution of
<span class="schemevariable">thunk</span></p><p>Example:</p><p><table cellspacing="0" class="schemeblock"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">with-check-info*</span></span></span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBs%0D%0AaXN0KSkp%0D%0A" class="schemevaluelink">list</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">make-check-info</span></span></span><span class="hspace">&nbsp;</span><span class="schemevalue">'</span><span class="schemevalue">time</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBj%0D%0AdXJyZW50LXNlY29uZHMpKSk%3D%0D%0A" class="schemevaluelink">current-seconds</a></span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">)</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICh1IC4gc2NoZW1lL2Jh%0D%0Ac2Uuc3MpKSBjIGxhbWJkYSkpKQ%3D%3D%0D%0A" class="schemesyntaxlink">lambda</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check</span></span></span><span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyA9%0D%0AKSkp%0D%0A" class="schemevaluelink">=</a></span><span class="hspace">&nbsp;</span><span class="schemevalue">1</span><span class="hspace">&nbsp;</span><span class="schemevalue">2</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">)</span></td></tr></table></p><p>When this check fails the message</p><p><table cellspacing="0"><tr><td><span class="stt"><span class="stt">time: &lt;current-seconds-at-time-of-running-check&gt;</span></span></td></tr></table></p><p>will be printed along with the usual information on an
check failure.</p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._with-check-info))"></a><a name="(form._((lib._schemeunit/test..ss)._with-check-info))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">with-check-info</span></span></span></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemeparen">(</span><span class="schemevariable">name</span><span class="hspace">&nbsp;</span><span class="schemevariable">val</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemevariable">body</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span></td></tr></table></p><p>The <span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">with-check-info</span></span></span> macro stores the given
information in the check information stack for the duration
of the execution of the body expressions.  <span class="schemesymbol">Name</span> is
a quoted symbol and <span class="schemevariable">val</span> is any value.</p><p>Example:</p><p><table cellspacing="0" class="schemeblock"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgKHUgLiBzY2hlbWUvcHJp%0D%0AdmF0ZS9tYXAuc3MpKSBjIGZvci1lYWNoKSkp%0D%0A" class="schemevaluelink">for-each</a></span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICh1IC4gc2NoZW1lL2Jh%0D%0Ac2Uuc3MpKSBjIGxhbWJkYSkpKQ%3D%3D%0D%0A" class="schemesyntaxlink">lambda</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">elt</span><span class="schemeparen">)</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">with-check-info</span></span></span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemeparen">(</span><span class="schemevalue">'</span><span class="schemevalue">current-element</span><span class="hspace">&nbsp;</span><span class="schemesymbol">elt</span><span class="schemeparen">)</span><span class="schemeparen">)</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-pred</span></span></span><span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBv%0D%0AZGQ%2FKSkp%0D%0A" class="schemevaluelink">odd?</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">elt</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">)</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBs%0D%0AaXN0KSkp%0D%0A" class="schemevaluelink">list</a></span><span class="hspace">&nbsp;</span><span class="schemevalue">1</span><span class="hspace">&nbsp;</span><span class="schemevalue">3</span><span class="hspace">&nbsp;</span><span class="schemevalue">5</span><span class="hspace">&nbsp;</span><span class="schemevalue">7</span><span class="hspace">&nbsp;</span><span class="schemevalue">8</span><span class="schemeparen">)</span><span class="schemeparen">)</span></td></tr></table></p><p>When this test fails the message</p><p><table cellspacing="0"><tr><td><span class="stt"><span class="stt">current-element: 8</span></span></td></tr></table></p><p>will be displayed along with the usual information on an
check failure.</p><h5>3.2.2<tt>&nbsp;</tt><a name="(part._.Custom_.Checks)"></a>Custom Checks</h5><p>Custom checks can be defined using <span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">define-check</span></span></span> and
its variants.  To effectively use these macros it is useful
to understand a few details about a check&rsquo;s evaluation
model.</p><p>Firstly, a check should be considered a function, even
though most uses are actually macros.  In particular, checks
always evaluate their arguments exactly once before
executing any expressions in the body of the checks.  Hence
if you wish to write checks that evalute user defined code
that code must be wrapped in a thunk (a function of no
arguments) by the user.  The predefined <span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-exn</span></span></span>
is an example of this type of check.</p><p>It is also useful to understand how the check information
stack operates.  The stack is stored in a parameter and the
<span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">with-check-info</span></span></span> forms evaluate to calls to
<span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICh1IC4gc2NoZW1lL3By%0D%0AaXZhdGUvbW9yZS1zY2hlbWUuc3MpKSBjIHBhcmFtZXRlcml6ZSkpKQ%3D%3D%0D%0A" class="schemesyntaxlink">parameterize</a></span>.  Hence check information has lexical
scope.  For this reason simple checks (see below) cannot
usefully contain calls to <span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">with-check-info</span></span></span> to report
additional information.  All checks created using
<span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">define-simple-check</span></span></span> or <span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">define-check</span></span></span> grab
some information by default: the name of the checks and the
values of the parameters.  Additionally the macro forms of
checks grab location information and the expressions passed
as parameters.</p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._define-simple-check))"></a><a name="(form._((lib._schemeunit/test..ss)._define-simple-check))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">define-simple-check</span></span></span></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemevariable">name</span><span class="hspace">&nbsp;</span><span class="schemevariable">param</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemevariable">expr</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span></td></tr></table></p><p>The <span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">define-simple-check</span></span></span> macro constructs a check
called <span class="schemevariable">name</span> that takes the params and an optional
message as arguments and evaluates the <span class="schemevariable">expr</span>s.  The
check fails if the result of the <span class="schemevariable">expr</span>s is
<span class="schemevalue">#f</span>.  Otherwise the check succeeds.  Note that
simple checks cannot report extra information using
<span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">with-check-info</span></span></span>.</p><p>Example:</p><p>To define a check <span class="schemesymbol">check-odd?</span></p><p><table cellspacing="0" class="schemeblock"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">define-simple-check</span></span></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">check-odd?</span><span class="hspace">&nbsp;</span><span class="schemesymbol">number</span><span class="schemeparen">)</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBv%0D%0AZGQ%2FKSkp%0D%0A" class="schemevaluelink">odd?</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">number</span><span class="schemeparen">)</span><span class="schemeparen">)</span></td></tr></table></p><p>We can use these checks in the usual way:</p><p><table cellspacing="0" class="schemeblock"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">check-odd?</span><span class="hspace">&nbsp;</span><span class="schemevalue">3</span><span class="schemeparen">)</span><span class="hspace">&nbsp;&nbsp;</span><span class="schemecomment">; </span><span class="schemecomment">Success</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="schemeparen">(</span><span class="schemesymbol">check-odd?</span><span class="hspace">&nbsp;</span><span class="schemevalue">2</span><span class="schemeparen">)</span><span class="hspace">&nbsp;&nbsp;</span><span class="schemecomment">; </span><span class="schemecomment">Failure</span></td></tr></table></p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._define-binary-check))"></a><a name="(form._((lib._schemeunit/test..ss)._define-binary-check))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">define-binary-check</span></span></span></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemevariable">name</span><span class="hspace">&nbsp;</span><span class="schemevariable">pred</span><span class="hspace">&nbsp;</span><span class="schemevariable">actual</span><span class="hspace">&nbsp;</span><span class="schemevariable">expected</span><span class="schemeparen">)</span><span class="schemeparen">)</span></td></tr><tr><td><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">define-binary-check</span></span></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemevariable">name</span><span class="hspace">&nbsp;</span><span class="schemevariable">actual</span><span class="hspace">&nbsp;</span><span class="schemevariable">expected</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemevariable">expr</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span></td></tr></table></p><p>The <span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">define-binary-check</span></span></span> macro constructs a check
that tests a binary predicate.  It&rsquo;s benefit over
<span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">define-simple-check</span></span></span> is in better reporting on check
failure.  The first form of the macro accepts a binary
predicate and tests if the predicate holds for the given
values.  The second form tests if <span class="schemevariable">expr</span> non-false.</p><p>Examples:</p><p>Here&rsquo;s the first form, where we use a predefined predicate
to construct a binary check:</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">define-binary-check</span></span></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">check-char=?</span><span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBj%0D%0AaGFyPT8pKSk%3D%0D%0A" class="schemevaluelink">char=?</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">actual</span><span class="hspace">&nbsp;</span><span class="schemesymbol">expected</span><span class="schemeparen">)</span><span class="schemeparen">)</span></p><p>In use:</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">check-char=?</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBy%0D%0AZWFkLWNoYXIpKSk%3D%0D%0A" class="schemevaluelink">read-char</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">a-port</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemevalue">#\a</span><span class="schemeparen">)</span></p><p>If the expression is more complicated the second form should
be used.  For example, below we define a binary check that
tests a number if within 0.01 of the expected value:</p><p><table cellspacing="0" class="schemeblock"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">define-binary-check</span></span></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">check-in-tolerance</span><span class="hspace">&nbsp;</span><span class="schemesymbol">actual</span><span class="hspace">&nbsp;</span><span class="schemesymbol">expected</span><span class="schemeparen">)</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyA8%0D%0AKSkp%0D%0A" class="schemevaluelink">&lt;</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBh%0D%0AYnMpKSk%3D%0D%0A" class="schemevaluelink">abs</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyAt%0D%0AKSkp%0D%0A" class="schemevaluelink">-</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">actual</span><span class="hspace">&nbsp;</span><span class="schemesymbol">expected</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemevalue">0.01</span><span class="schemeparen">)</span><span class="schemeparen">)</span></td></tr></table></p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._define-check))"></a><a name="(form._((lib._schemeunit/test..ss)._define-check))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">define-check</span></span></span></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemevariable">name</span><span class="hspace">&nbsp;</span><span class="schemevariable">param</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemevariable">expr</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span></td></tr></table></p><p>The <span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">define-check</span></span></span> macro acts in exactly the same way
as <span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">define-simple-check</span></span></span>, except the check only fails
if the macro <span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">fail-check</span></span></span> is called in the body of
the check.  This allows more flexible checks, and in
particular more flexible reporting options.</p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._fail-check))"></a><a name="(form._((lib._schemeunit/test..ss)._fail-check))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">fail-check</span></span></span></span><span class="schemeparen">)</span></td></tr></table></p><p>The <span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">fail-check</span></span></span> macro raises an <span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">exn:test:check</span></span></span> with
the contents of the check information stack.</p><h5>3.2.3<tt>&nbsp;</tt><a name="(part._.The_.Check_.Evaluation_.Context)"></a>The Check Evaluation Context</h5><p>The semantics of checks are determined by the parameters
<span class="schemesymbol">current-check-around</span> and
<span class="schemesymbol">current-check-handler</span>.  Other testing form such as
<span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-begin</span></span></span> and <span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-suite</span></span></span> change the value
of these parameters.</p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._current-check-handler))"></a><a name="(def._((lib._schemeunit/test..ss)._current-check-handler))"></a><span title="Provided from: schemeunit"><span class="schemesymbol">current-check-handler</span></span><span class="schemeparen"></span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">-&gt;</span><span class="hspace">&nbsp;</span><span class="schemesymbol">any/c</span><span class="hspace">&nbsp;</span><span class="schemesymbol">any/c</span><span class="schemeparen">)</span></td></tr><tr><td><span class="schemeparen">(</span><span title="Provided from: schemeunit"><span class="schemesymbol">current-check-handler</span></span><span class="hspace">&nbsp;</span><span class="schemevariable">handler</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyB2%0D%0Ab2lkPykpKQ%3D%3D%0D%0A" class="schemevaluelink">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">handler</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">-&gt;</span><span class="hspace">&nbsp;</span><span class="schemesymbol">any/c</span><span class="hspace">&nbsp;</span><span class="schemesymbol">any/c</span><span class="schemeparen">)</span></td></tr></table></p><p>Parameter containing the function that handles exceptions
raised by check failures.  The default behaviour is to print
an error message including the exception message and stack
trace.  </p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._current-check-around))"></a><a name="(def._((lib._schemeunit/test..ss)._current-check-around))"></a><span title="Provided from: schemeunit"><span class="schemesymbol">current-check-around</span></span><span class="schemeparen"></span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">-&gt;</span><span class="hspace">&nbsp;</span><span class="schemesymbol">thunk</span><span class="hspace">&nbsp;</span><span class="schemesymbol">any/c</span><span class="schemeparen">)</span></td></tr><tr><td><span class="schemeparen">(</span><span title="Provided from: schemeunit"><span class="schemesymbol">current-check-around</span></span><span class="hspace">&nbsp;</span><span class="schemevariable">check</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyB2%0D%0Ab2lkPykpKQ%3D%3D%0D%0A" class="schemevaluelink">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">check</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">-&gt;</span><span class="hspace">&nbsp;</span><span class="schemesymbol">thunk</span><span class="hspace">&nbsp;</span><span class="schemesymbol">any/c</span><span class="schemeparen">)</span></td></tr></table></p><p>Parameter containing the function that handles the execution
of checks.  The default value wraps the evaluation of
<span class="schemesymbol">thunk</span> in a <span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICh1IC4gc2NoZW1lL3By%0D%0AaXZhdGUvbW9yZS1zY2hlbWUuc3MpKSBjIHdpdGgtaGFuZGxlcnMpKSk%3D%0D%0A" class="schemesyntaxlink">with-handlers</a></span> call that calls
<span class="schemesymbol">current-check-handler</span> if an exception is raised.  </p><h4>3.3<tt>&nbsp;</tt><a name="(part._.Compound_.Testing_.Forms)"></a>Compound Testing Forms</h4><h5>3.3.1<tt>&nbsp;</tt><a name="(part._.Test_.Cases)"></a>Test Cases</h5><p>As programs increase in complexity the unit of testing
grows beyond a single check. For example, it may be the case
that if one check fails it doesn&rsquo;t make sense to run
another.  To solve this problem compound testing forms can
be used to group expressions.  If any expression in a group
fails (by raising an exception) the remaining expressions
will not be evaluated.</p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._test-begin))"></a><a name="(form._((lib._schemeunit/test..ss)._test-begin))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-begin</span></span></span></span><span class="hspace">&nbsp;</span><span class="schemevariable">expr</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span></td></tr></table></p><p>A <span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-begin</span></span></span> form groups the <span class="schemevariable">expr</span>s into a
single unit.  If any <span class="schemevariable">expr</span> fails the following ones
are not evaluated.  </p><p>For example, in the following code the world is not
destroyed as the preceding check fails:</p><p><table cellspacing="0" class="schemeblock"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-begin</span></span></span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-eq?</span></span></span><span class="hspace">&nbsp;</span><span class="schemevalue">'</span><span class="schemevalue">a</span><span class="hspace">&nbsp;</span><span class="schemevalue">'</span><span class="schemevalue">b</span><span class="schemeparen">)</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="schemecomment">; </span><span class="schemecomment">This line won't be run</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">destroy-the-world</span><span class="schemeparen">)</span><span class="schemeparen">)</span></td></tr></table></p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._test-case))"></a><a name="(form._((lib._schemeunit/test..ss)._test-case))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-case</span></span></span></span><span class="hspace">&nbsp;</span><span class="schemevariable">name</span><span class="hspace">&nbsp;</span><span class="schemevariable">expr</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span></td></tr></table></p><p>Like a <span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-begin</span></span></span> except a name is associated with
the group of <span class="schemevariable">expr</span>s.  The name will be reported if
the test fails.  </p><p>Here&rsquo;s the above example rewritten to use <span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-case</span></span></span>
so the test can be named.</p><p><table cellspacing="0" class="schemeblock"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-case</span></span></span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="schemevalue">"Example test"</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-eq?</span></span></span><span class="hspace">&nbsp;</span><span class="schemevalue">'</span><span class="schemevalue">a</span><span class="hspace">&nbsp;</span><span class="schemevalue">'</span><span class="schemevalue">b</span><span class="schemeparen">)</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="schemecomment">; </span><span class="schemecomment">This line won't be run</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">destroy-the-world</span><span class="schemeparen">)</span><span class="schemeparen">)</span></td></tr></table></p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._test-case~3f))"></a><a name="(def._((lib._schemeunit/test..ss)._test-case~3f))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-case?</span></span></span></span><span class="hspace">&nbsp;</span><span class="schemevariable">obj</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBi%0D%0Ab29sZWFuPykpKQ%3D%3D%0D%0A" class="schemevaluelink">boolean?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">obj</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">any</span></td></tr></table></p><p>True if <span class="schemevariable">obj</span> is a test case, and false otherwise</p><h5>3.3.2<tt>&nbsp;</tt><a name="(part._.Test_.Suites)"></a>Test Suites</h5><p>Test cases can themselves be grouped into test suites.  A
test suite can contain both test cases and test suites.
Unlike a check or test case, a test suite is not immediately
run.  Instead use one of the functions described in
<a href="api.html#(part._ui)">User Interfaces</a> or <a href="api.html#(part._running)">Programmatically Running Tests and Inspecting Results</a>.</p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._test-suite))"></a><a name="(form._((lib._schemeunit/test..ss)._test-suite))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-suite</span></span></span></span><span class="hspace">&nbsp;</span><span class="schemevariable">name</span><span class="hspace">&nbsp;</span><span class="schemeparen">[</span><span class="schemeparen">#:before</span><span class="hspace">&nbsp;</span><span class="schemevariable">before-thunk</span><span class="schemeparen">]</span><span class="hspace">&nbsp;</span><span class="schemeparen">[</span><span class="schemeparen">#:after</span><span class="hspace">&nbsp;</span><span class="schemevariable">after-thunk</span><span class="schemeparen">]</span><span class="hspace">&nbsp;</span><span class="schemevariable">test</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span></td></tr></table></p><p>Constructs a test suite with the given name and tests.  The
tests may be test cases, constructed using
<span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-begin</span></span></span> or <span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-case</span></span></span>, or other test
suites.</p><p>The <span class="schemevariable">before-thunk</span> and <span class="schemevariable">after-thunk</span> are
optional thunks (functions are no argument).  They are run
before and after the tests are run, respectively.</p><p>Unlike a check or test case, a test suite is not immediately
run.  Instead use one of the functions described in
<a href="api.html#(part._ui)">User Interfaces</a> or <a href="api.html#(part._running)">Programmatically Running Tests and Inspecting Results</a>.</p><p>For example, here is a test suite that displays <span class="stt">Before</span>
before any tests are run, and <span class="stt">After</span> when the tests have
finished.</p><p><table cellspacing="0" class="schemeblock"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-suite</span></span></span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="schemevalue">"An example suite"</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">#:before</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICh1IC4gc2NoZW1lL2Jh%0D%0Ac2Uuc3MpKSBjIGxhbWJkYSkpKQ%3D%3D%0D%0A" class="schemesyntaxlink">lambda</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBk%0D%0AaXNwbGF5KSkp%0D%0A" class="schemevaluelink">display</a></span><span class="hspace">&nbsp;</span><span class="schemevalue">"Before"</span><span class="schemeparen">)</span><span class="schemeparen">)</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">#:after</span><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICh1IC4gc2NoZW1lL2Jh%0D%0Ac2Uuc3MpKSBjIGxhbWJkYSkpKQ%3D%3D%0D%0A" class="schemesyntaxlink">lambda</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBk%0D%0AaXNwbGF5KSkp%0D%0A" class="schemevaluelink">display</a></span><span class="hspace">&nbsp;</span><span class="schemevalue">"After"</span><span class="schemeparen">)</span><span class="schemeparen">)</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-case</span></span></span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemevalue">"An example test"</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-eq?</span></span></span><span class="hspace">&nbsp;</span><span class="schemevalue">1</span><span class="hspace">&nbsp;</span><span class="schemevalue">1</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">)</span></td></tr></table></p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._test-suite~3f))"></a><a name="(def._((lib._schemeunit/test..ss)._test-suite~3f))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-suite?</span></span></span></span><span class="hspace">&nbsp;</span><span class="schemevariable">obj</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBi%0D%0Ab29sZWFuPykpKQ%3D%3D%0D%0A" class="schemevaluelink">boolean?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">obj</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">any</span></td></tr></table></p><p> True if
<span class="schemevariable">obj</span> is a test suite, and false otherwise</p><h5>3.3.2.1<tt>&nbsp;</tt><a name="(part._.Utilities_for_.Defining_.Test_.Suites)"></a>Utilities for Defining Test Suites</h5><p>There are some macros that simplify the common cases of
defining test suites:</p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._define-test-suite))"></a><a name="(form._((lib._schemeunit/test..ss)._define-test-suite))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">define-test-suite</span></span></span></span><span class="hspace">&nbsp;</span><span class="schemevariable">name</span><span class="hspace">&nbsp;</span><span class="schemevariable">test</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span></td></tr></table></p><p> The
<span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">define-test-suite</span></span></span> form creates a test suite with
the given name (converted to a string) and tests, and binds
it to the same name.</p><p>For example, this code creates a binding for the name
<span class="schemesymbol">example-suite</span> as well as creating a test suite with
the name <span class="schemevalue">"example-suite"</span>:</p><p><table cellspacing="0" class="schemeblock"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">define-test-suite</span></span></span><span class="hspace">&nbsp;</span><span class="schemesymbol">example-suite</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check</span></span></span><span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyA9%0D%0AKSkp%0D%0A" class="schemevaluelink">=</a></span><span class="hspace">&nbsp;</span><span class="schemevalue">1</span><span class="hspace">&nbsp;</span><span class="schemevalue">1</span><span class="schemeparen">)</span><span class="schemeparen">)</span></td></tr></table></p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._define/provide-test-suite))"></a><a name="(form._((lib._schemeunit/test..ss)._define/provide-test-suite))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">define/provide-test-suite</span></span></span></span><span class="hspace">&nbsp;</span><span class="schemevariable">name</span><span class="hspace">&nbsp;</span><span class="schemevariable">test</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span></td></tr></table></p><p> This
for is just like <span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">define-test-suite</span></span></span>, and in addition
it <span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICh1IC4gc2NoZW1lL2Jh%0D%0Ac2Uuc3MpKSBjIHByb3ZpZGUpKSk%3D%0D%0A" class="schemesyntaxlink">provide</a></span>s the test suite.</p><p>Finally, there is the <span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-suite*</span></span></span> macro, which
defines a test suite and test cases using a shorthand
syntax:</p><p><table cellspacing="0" class="boxed"><tr><td><table cellspacing="0" class="schemeblock"><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._test-suite*))"></a><a name="(form._((lib._schemeunit/test..ss)._test-suite*))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-suite*</span></span></span></span><span class="hspace">&nbsp;</span><span class="schemevariable">name</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemevariable">test-case-name</span><span class="hspace">&nbsp;</span><span class="schemevariable">test-case-body</span></td></tr><tr><td><span class="schememeta">...</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span></td></tr></table></td></tr></table></p><p> Defines a test suite with the given name, and
creates test cases within the suite, with the given names and
body expressions.</p><p>As far I know no-one uses this macro, so it might disappear
in future versions of SchemeUnit.</p><h5>3.3.3<tt>&nbsp;</tt><a name="(part._.Compound_.Testing_.Evaluation_.Context)"></a>Compound Testing Evaluation Context</h5><p>Just like with checks, there are several parameters that
control the semantics of compound testing forms.</p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._current-test-name))"></a><a name="(def._((lib._schemeunit/test..ss)._current-test-name))"></a><span title="Provided from: schemeunit"><span class="schemesymbol">current-test-name</span></span><span class="schemeparen"></span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">or/c</span><span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBz%0D%0AdHJpbmc%2FKSkp%0D%0A" class="schemevaluelink">string?</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">false/c</span><span class="schemeparen">)</span></td></tr><tr><td><span class="schemeparen">(</span><span title="Provided from: schemeunit"><span class="schemesymbol">current-test-name</span></span><span class="hspace">&nbsp;</span><span class="schemevariable">name</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyB2%0D%0Ab2lkPykpKQ%3D%3D%0D%0A" class="schemevaluelink">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">name</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">or/c</span><span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBz%0D%0AdHJpbmc%2FKSkp%0D%0A" class="schemevaluelink">string?</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">false/c</span><span class="schemeparen">)</span></td></tr></table></p><p>This parameter stores the name of the current test case.  A
value of <span class="schemevalue">#f</span> indicates a test case with no name,
such as one constructed by <span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-begin</span></span></span>.  </p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._current-test-case-around))"></a><a name="(def._((lib._schemeunit/test..ss)._current-test-case-around))"></a><span title="Provided from: schemeunit"><span class="schemesymbol">current-test-case-around</span></span><span class="schemeparen"></span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">-&gt;</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">-&gt;</span><span class="hspace">&nbsp;</span><span class="schemesymbol">any/c</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemesymbol">any/c</span><span class="schemeparen">)</span></td></tr><tr><td><span class="schemeparen">(</span><span title="Provided from: schemeunit"><span class="schemesymbol">current-test-case-around</span></span><span class="hspace">&nbsp;</span><span class="schemevariable">handler</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyB2%0D%0Ab2lkPykpKQ%3D%3D%0D%0A" class="schemevaluelink">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">handler</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">-&gt;</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">-&gt;</span><span class="hspace">&nbsp;</span><span class="schemesymbol">any/c</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemesymbol">any/c</span><span class="schemeparen">)</span></td></tr></table></p><p>This parameter handles evaluation of test cases.  The value
of the parameter is a function that is passed a thunk (a
function of no arguments). The function, when applied,
evaluates the expressions within a test case.  The default
value of the <span class="schemesymbol">current-test-case-around</span> parameters
evaluates the thunk in a context that catches exceptions and
prints an appropriate message indicating test case failure.</p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._test-suite-test-case-around))"></a><a name="(def._((lib._schemeunit/test..ss)._test-suite-test-case-around))"></a><span title="Provided from: schemeunit"><span class="schemesymbol">test-suite-test-case-around</span></span><span class="hspace">&nbsp;</span><span class="schemevariable">thunk</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemesymbol">any/c</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">thunk</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">-&gt;</span><span class="hspace">&nbsp;</span><span class="schemesymbol">any/c</span><span class="schemeparen">)</span></td></tr></table></p><p>The <span class="schemesymbol">current-test-case-around</span> parameter is
parameterized to this value within the scope of a
<span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-suite</span></span></span>.  This function creates a test case
structure instead of immediately evaluating the thunk.</p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._test-suite-check-around))"></a><a name="(def._((lib._schemeunit/test..ss)._test-suite-check-around))"></a><span title="Provided from: schemeunit"><span class="schemesymbol">test-suite-check-around</span></span><span class="hspace">&nbsp;</span><span class="schemevariable">thunk</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemesymbol">any/c</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">thunk</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">-&gt;</span><span class="hspace">&nbsp;</span><span class="schemesymbol">any/c</span><span class="schemeparen">)</span></td></tr></table></p><p>The <span class="schemesymbol">current-check-around</span> parameter is parameterized
to this value within the scope of a <span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-suite</span></span></span>.
This function creates a test case structure instead of
immediately evaluating a check.</p><h4>3.4<tt>&nbsp;</tt><a name="(part._.Test_.Control_.Flow)"></a>Test Control Flow</h4><p>The <span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">before</span></span></span>, <span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">after</span></span></span>, and <span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">around</span></span></span>
macros allow you to specify code that is always run before,
after, or around expressions in a test case.</p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._before))"></a><a name="(form._((lib._schemeunit/test..ss)._before))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">before</span></span></span></span><span class="hspace">&nbsp;</span><span class="schemevariable">before-expr</span><span class="hspace">&nbsp;</span><span class="schemevariable">expr1</span><span class="hspace">&nbsp;</span><span class="schemevariable">expr2</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span></td></tr></table></p><p>Whenever control enters the scope execute the <span class="schemevariable">before-expr</span>
before executing <span class="schemesymbol">expr-1</span>, and <span class="schemesymbol">expr-2</span><span class="stt"> </span><span class="schememeta"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICh1IC4gc2NoZW1lL3By%0D%0AaXZhdGUvc3R4Y2FzZS1zY2hlbWUuc3MpKSBjIC4uLikpKQ%3D%3D%0D%0A" class="schemesyntaxlink">...</a></span></p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._after))"></a><a name="(form._((lib._schemeunit/test..ss)._after))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">after</span></span></span></span><span class="hspace">&nbsp;</span><span class="schemevariable">expr-1</span><span class="hspace">&nbsp;</span><span class="schemevariable">expr-2</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="hspace">&nbsp;</span><span class="schemevariable">after-expr</span><span class="schemeparen">)</span></td></tr></table></p><p>Whenever control exits the scope execute the <span class="schemevariable">after-expr</span>
after executing <span class="schemevariable">expr-1</span>, and <span class="schemevariable">expr-2</span><span class="stt"> </span><span class="schememeta"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICh1IC4gc2NoZW1lL3By%0D%0AaXZhdGUvc3R4Y2FzZS1zY2hlbWUuc3MpKSBjIC4uLikpKQ%3D%3D%0D%0A" class="schemesyntaxlink">...</a></span>  The <span class="schemevariable">after-expr</span> is
executed even if control exits via an exception or other means.</p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._around))"></a><a name="(form._((lib._schemeunit/test..ss)._around))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">around</span></span></span></span><span class="hspace">&nbsp;</span><span class="schemevariable">before-expr</span><span class="hspace">&nbsp;</span><span class="schemevariable">expr-1</span><span class="hspace">&nbsp;</span><span class="schemevariable">expr-2</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="hspace">&nbsp;</span><span class="schemevariable">after-expr</span><span class="schemeparen">)</span></td></tr></table></p><p>Whenever control enters the scope execute the
<span class="schemevariable">before-expr</span> before executing <span class="schemevariable">expr-1</span><span class="stt"> </span><span class="schemevariable">expr-2</span><span class="stt"> </span><span class="schememeta"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICh1IC4gc2NoZW1lL3By%0D%0AaXZhdGUvc3R4Y2FzZS1zY2hlbWUuc3MpKSBjIC4uLikpKQ%3D%3D%0D%0A" class="schemesyntaxlink">...</a></span>, and execute <span class="schemevariable">after-expr</span> whenever control
leaves the scope.</p><p>Example:</p><p>The test below checks that the file <span class="stt">test.dat</span> contains
the string <span class="stt">"foo"</span>.  The before action writes to this
file.  The after action deletes it.</p><p><table cellspacing="0" class="schemeblock"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">around</span></span></span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgKHUgLiBzY2hlbWUvYmFz%0D%0AZS5zcykpIGMgd2l0aC1vdXRwdXQtdG8tZmlsZSkpKQ%3D%3D%0D%0A" class="schemevaluelink">with-output-to-file</a></span><span class="hspace">&nbsp;</span><span class="schemevalue">"test.dat"</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICh1IC4gc2NoZW1lL2Jh%0D%0Ac2Uuc3MpKSBjIGxhbWJkYSkpKQ%3D%3D%0D%0A" class="schemesyntaxlink">lambda</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemeparen">)</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyB3%0D%0Acml0ZSkpKQ%3D%3D%0D%0A" class="schemevaluelink">write</a></span><span class="hspace">&nbsp;</span><span class="schemevalue">"foo"</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">)</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgKHUgLiBzY2hlbWUvYmFz%0D%0AZS5zcykpIGMgd2l0aC1pbnB1dC1mcm9tLWZpbGUpKSk%3D%0D%0A" class="schemevaluelink">with-input-from-file</a></span><span class="hspace">&nbsp;</span><span class="schemevalue">"test.dat"</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICh1IC4gc2NoZW1lL2Jh%0D%0Ac2Uuc3MpKSBjIGxhbWJkYSkpKQ%3D%3D%0D%0A" class="schemesyntaxlink">lambda</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemeparen">)</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-equal?</span></span></span><span class="hspace">&nbsp;</span><span class="schemevalue">"foo"</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBy%0D%0AZWFkKSkp%0D%0A" class="schemevaluelink">read</a></span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">)</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBk%0D%0AZWxldGUtZmlsZSkpKQ%3D%3D%0D%0A" class="schemevaluelink">delete-file</a></span><span class="hspace">&nbsp;</span><span class="schemevalue">"test.dat"</span><span class="schemeparen">)</span><span class="schemeparen">)</span></td></tr></table></p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._delay-test))"></a><a name="(form._((lib._schemeunit/test..ss)._delay-test))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">delay-test</span></span></span></span><span class="hspace">&nbsp;</span><span class="schemevariable">test1</span><span class="hspace">&nbsp;</span><span class="schemevariable">test2</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span></td></tr></table></p><p>This somewhat curious macro evaluates the given tests in a
context where <span class="schemesymbol">current-test-case-around</span> is
parameterized to <span class="schemesymbol">test-suite-test-case-around</span>.  This
has been useful in testing SchemeUnit.  It might be useful
for you if you create test cases that create test cases.</p><h4>3.5<tt>&nbsp;</tt><a name="(part._.Miscellaneous_.Utilities)"></a>Miscellaneous Utilities</h4><p>The <span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">require/expose</span></span></span> macro allows you to access
bindings that a module does not provide.  It is useful for
testing the private functions of modules.</p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._require/expose))"></a><a name="(form._((lib._schemeunit/test..ss)._require/expose))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">require/expose</span></span></span></span><span class="hspace">&nbsp;</span><span class="schemevariable">module</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemevariable">id</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span><span class="schemeparen">)</span></td></tr></table></p><p>Requires <span class="schemevariable">id</span> from <span class="schemevariable">module</span> into the current module.  It doesn&rsquo;t matter if the source module provides the bindings or not; <span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">require/expose</span></span></span> can still get at them.</p><p>Note that <span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">require/expose</span></span></span> can be a bit fragile,
especially when mixed with compiled code.  Use at your own risk!</p><p>This example gets <span class="schemesymbol">make-failure-test</span>, which is defined in a SchemeUnit test:</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">require/expose</span></span></span><span class="hspace">&nbsp;</span><span class="schemesymbol">schemeunit/check-test</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">make-failure-test</span><span class="schemeparen">)</span><span class="schemeparen">)</span></p><h4>3.6<tt>&nbsp;</tt><a name="(part._ui)"></a>User Interfaces</h4><p>SchemeUnit provides a textual and a graphical user interface</p><h5>3.6.1<tt>&nbsp;</tt><a name="(part._.Textual_.User_.Interface)"></a><a name="(mod-path._schemeunit/text-ui)"></a>Textual User Interface</h5><p><table cellspacing="0" class="defmodule"><tr><td><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICh1IC4gc2NoZW1lL2Jh%0D%0Ac2Uuc3MpKSBjIHJlcXVpcmUpKSk%3D%0D%0A" class="schemesyntaxlink">require</a></span><span class="stt"> </span><a href="api.html#(mod-path._schemeunit/text-ui)" class="schememodlink"><span class="schemesymbol">schemeunit/text-ui</span></a><span class="schemeparen">)</span></td></tr></table></p><p>The textual UI is in the <span class="schemesymbol">text-ui</span> module.  It is run
via the <span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">run-tests</span></span></span> function</p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/text-ui..ss)._run-tests))"></a><a name="(def._((lib._schemeunit/text-ui..ss)._run-tests))"></a><span title="Provided from: schemeunit/text-ui"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">run-tests</span></span></span></span><span class="hspace">&nbsp;</span><span class="schemevariable">test</span><span class="hspace">&nbsp;</span>[<span class="schemevariable">verbosity</span>]<span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemesymbol">natural-number/c</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">test</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">or/c</span><span class="hspace">&nbsp;</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-case?</span></span></span><span class="hspace">&nbsp;</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-suite?</span></span></span><span class="schemeparen">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">verbosity</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">symbols</span><span class="hspace">&nbsp;</span><span class="schemevalue">'</span><span class="schemevalue">quite</span><span class="hspace">&nbsp;</span><span class="schemevalue">'</span><span class="schemevalue">normal</span><span class="hspace">&nbsp;</span><span class="schemevalue">'</span><span class="schemevalue">verbose</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="schemevalue">'</span><span class="schemevalue">normal</span></td></tr></table></p><p>The given <span class="schemevariable">test</span> is run and the result of running it
output to the <span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBj%0D%0AdXJyZW50LW91dHB1dC1wb3J0KSkp%0D%0A" class="schemevaluelink">current-output-port</a></span>.  The output is
compatable with the (X)Emacs next-error command (as used,
for example, by (X)Emac&rsquo;s compile function)</p><p>The optional <span class="schemevariable">verbosity</span> is one of <span class="schemevalue">'</span><span class="schemevalue">quiet</span>,
<span class="schemevalue">'</span><span class="schemevalue">normal</span>, or <span class="schemevalue">'</span><span class="schemevalue">verbose</span>.  Quiet output
displays only the number of successes, failures, and errors.
Normal reporting suppresses some extraneous check
information (such as the expression).  Verbose reports all
information.</p><p><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">run-tests</span></span></span> returns the number of unsuccessful tests.</p><h5>3.6.2<tt>&nbsp;</tt><a name="(part._.Graphical_.User_.Interface)"></a>Graphical User Interface</h5><p>The GUI has not yet been updated to this version of SchemeUnit.</p><h4>3.7<tt>&nbsp;</tt><a name="(part._running)"></a>Programmatically Running Tests and Inspecting Results</h4><p>SchemeUnit provides an API for running tests, from which
custom UIs can be created.</p><h5>3.7.1<tt>&nbsp;</tt><a name="(part._.Result_.Types)"></a>Result Types</h5><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><span class="schemeparen">struct</span><span class="stt"> </span><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._make-exn~3atest))"></a><a name="(def._((lib._schemeunit/test..ss)._make-exn~3atest))"></a><a name="(dep._((lib._schemeunit/test..ss)._exn~3atest~3f))"></a><a name="(def._((lib._schemeunit/test..ss)._exn~3atest~3f))"></a><a name="(dep._((lib._schemeunit/test..ss)._struct~3aexn~3atest))"></a><a name="(def._((lib._schemeunit/test..ss)._struct~3aexn~3atest))"></a><a name="(dep._((lib._schemeunit/test..ss)._exn~3atest))"></a><a name="(def._((lib._schemeunit/test..ss)._exn~3atest))"></a><span title="Provided from: schemeunit"><span class="schemesymbol">exn:test</span></span><span class="stt"> </span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBl%0D%0AeG4pKSk%3D%0D%0A" class="schemevaluelink">exn</a></span><span class="schemeparen">)</span><span class="stt"> </span><span class="schemeparen">(</span><span class="schemeparen">)</span><span class="schemeparen">)</span></td></tr></table></p><p>The base structure for SchemeUnit exceptions.  You should
never catch instances of this type, only the subtypes
documented below.</p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><span class="schemeparen">struct</span><span class="stt"> </span><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._exn~3atest~3acheck-stack))"></a><a name="(def._((lib._schemeunit/test..ss)._exn~3atest~3acheck-stack))"></a><a name="(dep._((lib._schemeunit/test..ss)._make-exn~3atest~3acheck))"></a><a name="(def._((lib._schemeunit/test..ss)._make-exn~3atest~3acheck))"></a><a name="(dep._((lib._schemeunit/test..ss)._exn~3atest~3acheck~3f))"></a><a name="(def._((lib._schemeunit/test..ss)._exn~3atest~3acheck~3f))"></a><a name="(dep._((lib._schemeunit/test..ss)._struct~3aexn~3atest~3acheck))"></a><a name="(def._((lib._schemeunit/test..ss)._struct~3aexn~3atest~3acheck))"></a><a name="(dep._((lib._schemeunit/test..ss)._exn~3atest~3acheck))"></a><a name="(def._((lib._schemeunit/test..ss)._exn~3atest~3acheck))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">exn:test:check</span></span></span></span><span class="stt"> </span><span class="schemesymbol">exn:test</span><span class="schemeparen">)</span><span class="stt"> </span><span class="schemeparen">(</span><span class="schemesymbol">stack</span><span class="schemeparen">)</span><span class="schemeparen">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemesymbol">stack</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">listof</span><span class="hspace">&nbsp;</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-info</span></span></span><span class="schemeparen">)</span></td></tr></table></p><p>A <span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">exn:test:check</span></span></span> is raised when an check fails, and
contains the contents of the check-info stack at the
time of failure.</p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><span class="schemeparen">struct</span><span class="stt"> </span><a name="(dep._((lib._schemeunit/test..ss)._test-result-test-case-name))"></a><a name="(def._((lib._schemeunit/test..ss)._test-result-test-case-name))"></a><a name="(dep._((lib._schemeunit/test..ss)._make-test-result))"></a><a name="(def._((lib._schemeunit/test..ss)._make-test-result))"></a><a name="(dep._((lib._schemeunit/test..ss)._test-result~3f))"></a><a name="(def._((lib._schemeunit/test..ss)._test-result~3f))"></a><a name="(dep._((lib._schemeunit/test..ss)._struct~3atest-result))"></a><a name="(def._((lib._schemeunit/test..ss)._struct~3atest-result))"></a><a name="(dep._((lib._schemeunit/test..ss)._test-result))"></a><a name="(def._((lib._schemeunit/test..ss)._test-result))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-result</span></span></span></span><span class="stt"> </span><span class="schemeparen">(</span><span class="schemesymbol">test-case-name</span><span class="schemeparen">)</span><span class="schemeparen">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemesymbol">test-case-name</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">or/c</span><span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBz%0D%0AdHJpbmcpKSk%3D%0D%0A" class="schemevaluelink">string</a></span><span class="hspace">&nbsp;</span><span class="schemevalue">#f</span><span class="schemeparen">)</span></td></tr></table></p><p>A test-result is the result of running the test with
the given name (with <span class="schemevalue">#f</span> indicating no name is available).</p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><span class="schemeparen">struct</span><span class="stt"> </span><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._test-failure-result))"></a><a name="(def._((lib._schemeunit/test..ss)._test-failure-result))"></a><a name="(dep._((lib._schemeunit/test..ss)._make-test-failure))"></a><a name="(def._((lib._schemeunit/test..ss)._make-test-failure))"></a><a name="(dep._((lib._schemeunit/test..ss)._test-failure~3f))"></a><a name="(def._((lib._schemeunit/test..ss)._test-failure~3f))"></a><a name="(dep._((lib._schemeunit/test..ss)._struct~3atest-failure))"></a><a name="(def._((lib._schemeunit/test..ss)._struct~3atest-failure))"></a><a name="(dep._((lib._schemeunit/test..ss)._test-failure))"></a><a name="(def._((lib._schemeunit/test..ss)._test-failure))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-failure</span></span></span></span><span class="stt"> </span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-result</span></span></span><span class="schemeparen">)</span><span class="stt"> </span><span class="schemeparen">(</span><span class="schemesymbol">result</span><span class="schemeparen">)</span><span class="schemeparen">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemesymbol">result</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">any</span></td></tr></table></p><p>Subtype of test-result representing a test failure.</p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><span class="schemeparen">struct</span><span class="stt"> </span><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._test-error-result))"></a><a name="(def._((lib._schemeunit/test..ss)._test-error-result))"></a><a name="(dep._((lib._schemeunit/test..ss)._make-test-error))"></a><a name="(def._((lib._schemeunit/test..ss)._make-test-error))"></a><a name="(dep._((lib._schemeunit/test..ss)._test-error~3f))"></a><a name="(def._((lib._schemeunit/test..ss)._test-error~3f))"></a><a name="(dep._((lib._schemeunit/test..ss)._struct~3atest-error))"></a><a name="(def._((lib._schemeunit/test..ss)._struct~3atest-error))"></a><a name="(dep._((lib._schemeunit/test..ss)._test-error))"></a><a name="(def._((lib._schemeunit/test..ss)._test-error))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-error</span></span></span></span><span class="stt"> </span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-result</span></span></span><span class="schemeparen">)</span><span class="stt"> </span><span class="schemeparen">(</span><span class="schemesymbol">result</span><span class="schemeparen">)</span><span class="schemeparen">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemesymbol">result</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBl%0D%0AeG4pKSk%3D%0D%0A" class="schemevaluelink">exn</a></span></td></tr></table></p><p>Subtype of test-result representing a test error.</p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><span class="schemeparen">struct</span><span class="stt"> </span><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._test-success-result))"></a><a name="(def._((lib._schemeunit/test..ss)._test-success-result))"></a><a name="(dep._((lib._schemeunit/test..ss)._make-test-success))"></a><a name="(def._((lib._schemeunit/test..ss)._make-test-success))"></a><a name="(dep._((lib._schemeunit/test..ss)._test-success~3f))"></a><a name="(def._((lib._schemeunit/test..ss)._test-success~3f))"></a><a name="(dep._((lib._schemeunit/test..ss)._struct~3atest-success))"></a><a name="(def._((lib._schemeunit/test..ss)._struct~3atest-success))"></a><a name="(dep._((lib._schemeunit/test..ss)._test-success))"></a><a name="(def._((lib._schemeunit/test..ss)._test-success))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-success</span></span></span></span><span class="stt"> </span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-result</span></span></span><span class="schemeparen">)</span><span class="stt"> </span><span class="schemeparen">(</span><span class="schemesymbol">result</span><span class="schemeparen">)</span><span class="schemeparen">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemesymbol">result</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">any</span></td></tr></table></p><p>Subtype of test-result representing a test success.</p><h5>3.7.2<tt>&nbsp;</tt><a name="(part._.Functions_to_.Run_.Tests)"></a>Functions to Run Tests</h5><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._run-test-case))"></a><a name="(def._((lib._schemeunit/test..ss)._run-test-case))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">run-test-case</span></span></span></span><span class="hspace">&nbsp;</span><span class="schemevariable">name</span><span class="hspace">&nbsp;</span><span class="schemevariable">action</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-result</span></span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">name</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">or/c</span><span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBz%0D%0AdHJpbmcpKSk%3D%0D%0A" class="schemevaluelink">string</a></span><span class="hspace">&nbsp;</span><span class="schemevalue">#f</span><span class="schemeparen">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">action</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">-&gt;</span><span class="hspace">&nbsp;</span><span class="schemesymbol">any</span><span class="schemeparen">)</span></td></tr></table></p><p>Runs the given test case, returning a result representing success, failure, or error.</p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._run-test))"></a><a name="(def._((lib._schemeunit/test..ss)._run-test))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">run-test</span></span></span></span><span class="hspace">&nbsp;</span><span class="schemevariable">test</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">R</span><span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyA9%0D%0AKSkp%0D%0A" class="schemevaluelink">=</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">listof</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">or/c</span><span class="hspace">&nbsp;</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-result</span></span></span><span class="hspace">&nbsp;</span><span class="schemesymbol">R</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">test</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">or/c</span><span class="hspace">&nbsp;</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-case?</span></span></span><span class="hspace">&nbsp;</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-suite?</span></span></span><span class="schemeparen">)</span></td></tr></table></p><p>Runs the given test (test case or test suite) returning a
tree (list of lists) of results</p><p>Example:</p><p><table cellspacing="0" class="schemeblock"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">run-test</span></span></span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-suite</span></span></span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemevalue">"Dummy"</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-case</span></span></span><span class="hspace">&nbsp;</span><span class="schemevalue">"Dummy"</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">check-equal?</span></span></span><span class="hspace">&nbsp;</span><span class="schemevalue">1</span><span class="hspace">&nbsp;</span><span class="schemevalue">2</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">)</span></td></tr></table></p><p><table cellspacing="0" class="boxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._fold-test-results))"></a><a name="(def._((lib._schemeunit/test..ss)._fold-test-results))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">fold-test-results</span></span></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="schemevariable">result-fn</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="schemevariable">seed</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="schemevariable">test</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="schemeparen">#:run</span><span class="hspace">&nbsp;</span><span class="schemevariable">run</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="schemeparen">#:fdown</span><span class="hspace">&nbsp;</span><span class="schemevariable">fdown</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="schemeparen">#:fup</span><span class="hspace">&nbsp;</span><span class="schemevariable">fup</span><span class="schemeparen">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="schemevalue">'</span><span class="schemevalue">a</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">result-fn</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemevalue">'</span><span class="schemevalue">b</span><span class="hspace">&nbsp;</span><span class="schemevalue">'</span><span class="schemevalue">c</span><span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICh1IC4gc2NoZW1lL3By%0D%0AaXZhdGUvc3R4Y2FzZS1zY2hlbWUuc3MpKSBjIC4uLikpKQ%3D%3D%0D%0A" class="schemesyntaxlink">...</a></span><span class="hspace">&nbsp;</span><span class="schemevalue">'</span><span class="schemevalue">a</span><span class="hspace">&nbsp;</span><span class="schemeparen">. </span><span class="schemesymbol">-&gt;</span><span class="schemeparen"> .</span><span class="hspace">&nbsp;</span><span class="schemevalue">'</span><span class="schemevalue">a</span><span class="schemeparen">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">seed</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemevalue">'</span><span class="schemevalue">a</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">test</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">or/c</span><span class="hspace">&nbsp;</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-case?</span></span></span><span class="hspace">&nbsp;</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-suite?</span></span></span><span class="schemeparen">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">run</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBz%0D%0AdHJpbmcpKSk%3D%0D%0A" class="schemevaluelink">string</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemeparen">(</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemesymbol">-&gt;</span><span class="hspace">&nbsp;</span><span class="schemesymbol">any</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemeparen">. </span><span class="schemesymbol">-&gt;</span><span class="schemeparen"> .</span><span class="hspace">&nbsp;</span><span class="schemevalue">'</span><span class="schemevalue">b</span><span class="hspace">&nbsp;</span><span class="schemevalue">'</span><span class="schemevalue">c</span><span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICh1IC4gc2NoZW1lL3By%0D%0AaXZhdGUvc3R4Y2FzZS1zY2hlbWUuc3MpKSBjIC4uLikpKQ%3D%3D%0D%0A" class="schemesyntaxlink">...</a></span><span class="schemeparen">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">fdown</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBz%0D%0AdHJpbmcpKSk%3D%0D%0A" class="schemevaluelink">string</a></span><span class="hspace">&nbsp;</span><span class="schemevalue">'</span><span class="schemevalue">a</span><span class="hspace">&nbsp;</span><span class="schemeparen">. </span><span class="schemesymbol">-&gt;</span><span class="schemeparen"> .</span><span class="hspace">&nbsp;</span><span class="schemevalue">'</span><span class="schemevalue">a</span><span class="schemeparen">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">fup</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBz%0D%0AdHJpbmcpKSk%3D%0D%0A" class="schemevaluelink">string</a></span><span class="hspace">&nbsp;</span><span class="schemevalue">'</span><span class="schemevalue">a</span><span class="hspace">&nbsp;</span><span class="schemeparen">. </span><span class="schemesymbol">-&gt;</span><span class="schemeparen"> .</span><span class="hspace">&nbsp;</span><span class="schemevalue">'</span><span class="schemevalue">a</span><span class="schemeparen">)</span></td></tr></table></p><p>Fold <span class="schemevariable">result-fn</span> pre-order left-to-right depth-first
over the results of <span class="schemevariable">run</span>.  By default <span class="schemevariable">run</span>
is <span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">run-test-case</span></span></span> and <span class="schemevariable">fdown</span> and
<span class="schemevariable">fup</span> just return the seed, so <span class="schemevariable">result-fn</span> is
folded over the test results.</p><p>This function is useful for writing custom folds (and hence
UIs) over test results without you having to take care of
all the expected setup and teardown.  For example,
<span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">fold-test-results</span></span></span> will run test suite before and
after actions for you.  However it is still flexible enough,
via its keyword arguments, to do almost anything that foldts
can.  Hence it should be used in preference to foldts.</p><p><span class="schemevariable">result-fn</span> is a function from the results of
<span class="schemevariable">run</span> (defaults to a <span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-result</span></span></span>) and the
seed to a new seed</p><p>Seed is any value</p><p>Test is a test-case or test-suite</p><p>Run is a function from a test case name (string) and action
(thunk) to any values.</p><p>FDown is a function from a test suite name (string) and the
seed, to a new seed</p><p>FUp is a function from a test suite name (string) and the
seed, to a new seed.</p><p>Examples:</p><p>The following code counts the number of successes</p><p><table cellspacing="0" class="schemeblock"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICh1IC4gc2NoZW1lL2Jh%0D%0Ac2Uuc3MpKSBjIGRlZmluZSkpKQ%3D%3D%0D%0A" class="schemesyntaxlink">define</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">count-successes</span><span class="hspace">&nbsp;</span><span class="schemesymbol">test</span><span class="schemeparen">)</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">fold-test-results</span></span></span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICh1IC4gc2NoZW1lL2Jh%0D%0Ac2Uuc3MpKSBjIGxhbWJkYSkpKQ%3D%3D%0D%0A" class="schemesyntaxlink">lambda</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">result</span><span class="hspace">&nbsp;</span><span class="schemesymbol">seed</span><span class="schemeparen">)</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIHF1b3RlIGMgIyVrZXJuZWwpIGMg%0D%0AaWYpKSk%3D%0D%0A" class="schemesyntaxlink">if</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-success?</span></span></span><span class="hspace">&nbsp;</span><span class="schemesymbol">result</span><span class="schemeparen">)</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBh%0D%0AZGQxKSkp%0D%0A" class="schemevaluelink">add1</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">seed</span><span class="schemeparen">)</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemesymbol">seed</span><span class="schemeparen">)</span><span class="schemeparen">)</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="schemevalue">0</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="schemesymbol">test</span><span class="schemeparen">)</span><span class="schemeparen">)</span></td></tr></table></p><p>The following code returns the symbol <span class="schemevalue">'</span><span class="schemevalue">burp</span> instead
of running test cases.  Note how the result-fn receives the
value of run.</p><p><table cellspacing="0" class="schemeblock"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICh1IC4gc2NoZW1lL2Jh%0D%0Ac2Uuc3MpKSBjIGRlZmluZSkpKQ%3D%3D%0D%0A" class="schemesyntaxlink">define</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">burp</span><span class="hspace">&nbsp;</span><span class="schemesymbol">test</span><span class="schemeparen">)</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">fold-test-results</span></span></span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICh1IC4gc2NoZW1lL2Jh%0D%0Ac2Uuc3MpKSBjIGxhbWJkYSkpKQ%3D%3D%0D%0A" class="schemesyntaxlink">lambda</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">result</span><span class="hspace">&nbsp;</span><span class="schemesymbol">seed</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBj%0D%0Ab25zKSkp%0D%0A" class="schemevaluelink">cons</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">result</span><span class="hspace">&nbsp;</span><span class="schemesymbol">seed</span><span class="schemeparen">)</span><span class="schemeparen">)</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBu%0D%0AdWxsKSkp%0D%0A" class="schemevaluelink">null</a></span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="schemesymbol">test</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">#:run</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICh1IC4gc2NoZW1lL2Jh%0D%0Ac2Uuc3MpKSBjIGxhbWJkYSkpKQ%3D%3D%0D%0A" class="schemesyntaxlink">lambda</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">name</span><span class="hspace">&nbsp;</span><span class="schemesymbol">action</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemevalue">'</span><span class="schemevalue">burp</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">)</span></td></tr></table></p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((lib._schemeunit/test..ss)._foldts))"></a><a name="(def._((lib._schemeunit/test..ss)._foldts))"></a><span title="Provided from: schemeunit"><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">foldts</span></span></span></span><span class="hspace">&nbsp;</span><span class="schemevariable">fdown</span><span class="hspace">&nbsp;</span><span class="schemevariable">fup</span><span class="hspace">&nbsp;</span><span class="schemevariable">fhere</span><span class="hspace">&nbsp;</span><span class="schemevariable">seed</span><span class="hspace">&nbsp;</span><span class="schemevariable">test</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemevalue">'</span><span class="schemevalue">a</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">fdown</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-suite</span></span></span><span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBz%0D%0AdHJpbmcpKSk%3D%0D%0A" class="schemevaluelink">string</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">thunk</span><span class="hspace">&nbsp;</span><span class="schemesymbol">thunk</span><span class="hspace">&nbsp;</span><span class="schemevalue">'</span><span class="schemevalue">a</span><span class="hspace">&nbsp;</span><span class="schemesymbol">-&gt;</span><span class="hspace">&nbsp;</span><span class="schemevalue">'</span><span class="schemevalue">a</span><span class="schemeparen">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">fup</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-suite</span></span></span><span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBz%0D%0AdHJpbmcpKSk%3D%0D%0A" class="schemevaluelink">string</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">thunk</span><span class="hspace">&nbsp;</span><span class="schemesymbol">thunk</span><span class="hspace">&nbsp;</span><span class="schemevalue">'</span><span class="schemevalue">a</span><span class="hspace">&nbsp;</span><span class="schemevalue">'</span><span class="schemevalue">a</span><span class="hspace">&nbsp;</span><span class="schemesymbol">-&gt;</span><span class="hspace">&nbsp;</span><span class="schemevalue">'</span><span class="schemevalue">a</span><span class="schemeparen">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">fhere</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-case</span></span></span><span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBz%0D%0AdHJpbmcpKSk%3D%0D%0A" class="schemevaluelink">string</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">thunk</span><span class="hspace">&nbsp;</span><span class="schemevalue">'</span><span class="schemevalue">a</span><span class="hspace">&nbsp;</span><span class="schemesymbol">-&gt;</span><span class="hspace">&nbsp;</span><span class="schemevalue">'</span><span class="schemevalue">a</span><span class="schemeparen">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">seed</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemevalue">'</span><span class="schemevalue">a</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">test</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">or/c</span><span class="hspace">&nbsp;</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-case?</span></span></span><span class="hspace">&nbsp;</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">test-suite?</span></span></span><span class="schemeparen">)</span></td></tr></table></p><p>Foldts is a nifty tree fold (created by Oleg Kiselyov) that
folds over a test in a useful way (fold-test-results isn&rsquo;t
that useful as you can&rsquo;t specify actions around test cases).</p><p>Fdown is a function of test suite, test suite name, before
action, after action, and the seed.  It is run when a test
suite is encountered on the way down the tree (pre-order).</p><p>Fup is a function of test suite, test suite name, before
action, after action, the seed at the current level, and the
seed returned by the children.  It is run on the way up the
tree (post-order).</p><p>Fhere is a function of the test case, test case name, the
test case action, and the seed. (Note that this might change
in the near future to just the test case.  This change would
be to allow fhere to discriminate subtypes of test-case,
which in turn would allow test cases that are, for example,
ignored).</p><p>Example:</p><p>Here&rsquo;s the implementation of fold-test-results in terms of
foldts:</p><p><table cellspacing="0" class="schemeblock"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICh1IC4gc2NoZW1lL2Jh%0D%0Ac2Uuc3MpKSBjIGRlZmluZSkpKQ%3D%3D%0D%0A" class="schemesyntaxlink">define</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">fold-test-results</span></span></span><span class="hspace">&nbsp;</span><span class="schemesymbol">suite-fn</span><span class="hspace">&nbsp;</span><span class="schemesymbol">case-fn</span><span class="hspace">&nbsp;</span><span class="schemesymbol">seed</span><span class="hspace">&nbsp;</span><span class="schemesymbol">test</span><span class="schemeparen">)</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">foldts</span></span></span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICh1IC4gc2NoZW1lL2Jh%0D%0Ac2Uuc3MpKSBjIGxhbWJkYSkpKQ%3D%3D%0D%0A" class="schemesyntaxlink">lambda</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">suite</span><span class="hspace">&nbsp;</span><span class="schemesymbol">name</span><span class="hspace">&nbsp;</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">before</span></span></span><span class="hspace">&nbsp;</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">after</span></span></span><span class="hspace">&nbsp;</span><span class="schemesymbol">seed</span><span class="schemeparen">)</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">before</span></span></span><span class="schemeparen">)</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">suite-fn</span><span class="hspace">&nbsp;</span><span class="schemesymbol">name</span><span class="hspace">&nbsp;</span><span class="schemesymbol">seed</span><span class="schemeparen">)</span><span class="schemeparen">)</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICh1IC4gc2NoZW1lL2Jh%0D%0Ac2Uuc3MpKSBjIGxhbWJkYSkpKQ%3D%3D%0D%0A" class="schemesyntaxlink">lambda</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">suite</span><span class="hspace">&nbsp;</span><span class="schemesymbol">name</span><span class="hspace">&nbsp;</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">before</span></span></span><span class="hspace">&nbsp;</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">after</span></span></span><span class="hspace">&nbsp;</span><span class="schemesymbol">seed</span><span class="hspace">&nbsp;</span><span class="schemesymbol">kid-seed</span><span class="schemeparen">)</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">after</span></span></span><span class="schemeparen">)</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemesymbol">kid-seed</span><span class="schemeparen">)</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICh1IC4gc2NoZW1lL2Jh%0D%0Ac2Uuc3MpKSBjIGxhbWJkYSkpKQ%3D%3D%0D%0A" class="schemesyntaxlink">lambda</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICh1IC4gc2NoZW1lL3By%0D%0AaXZhdGUvbW9yZS1zY2hlbWUuc3MpKSBjIGNhc2UpKSk%3D%0D%0A" class="schemesyntaxlink">case</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">name</span><span class="hspace">&nbsp;</span><span class="schemesymbol">action</span><span class="hspace">&nbsp;</span><span class="schemesymbol">seed</span><span class="schemeparen">)</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">case-fn</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">run-test-case</span></span></span><span class="hspace">&nbsp;</span><span class="schemesymbol">name</span><span class="hspace">&nbsp;</span><span class="schemesymbol">action</span><span class="schemeparen">)</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemesymbol">seed</span><span class="schemeparen">)</span><span class="schemeparen">)</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="schemesymbol">seed</span></td></tr><tr><td><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="schemesymbol">test</span><span class="schemeparen">)</span><span class="schemeparen">)</span></td></tr></table></p><p>If you&rsquo;re used to folds you&rsquo;ll probably be a bit surprised
that the functions you pass to foldts receive both the
structure they operate on, and the contents of that
structure.  This is indeed unusual.  It is done to allow
subtypes of test-case and test-suite to be run in customised
ways.  For example, you might define subtypes of test case
that are ignored (not run), or have their execution time
recorded, and so on.  To do so the functions that run the
test cases need to know what type the test case has, and
hence is is necessary to provide this information.</p><p>If you&rsquo;ve made it this far you truly are a master SchemeUnit
hacker.  As a bonus prize we&rsquo;ll just mention that the code
in hash-monad.ss and monad.ss might be of interest for
constructing user interfaces.  The API is still in flux, so
isn&rsquo;t documented here.  However, do look at the
implementation of <span class="schemesymbol"><span class="badlink"><span class="schemevaluelink">run-tests</span></span></span> for examples of use.</p><div class="navsetbottom"><span class="navleft">&nbsp;&nbsp;</span><span class="navright"><a href="philosophy.html" title="backward to &quot;2 The Philosophy of SchemeUnit&quot;">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;SchemeUnit: Unit Testing for Scheme&quot;">up</a>&nbsp;&nbsp;<a href="Release_Notes.html" title="forward to &quot;4 Release Notes&quot;">next &rarr;</a></span>&nbsp;</div></div></div></body></html>